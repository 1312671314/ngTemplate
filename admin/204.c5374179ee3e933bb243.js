"use strict";(self.webpackChunkng_alain=self.webpackChunkng_alain||[]).push([[204],{9346:(J,b)=>{var Z=function(){function p(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return p.hashStr=function(t,i){return void 0===i&&(i=!1),this.onePassHasher.start().appendStr(t).end(i)},p.hashAsciiStr=function(t,i){return void 0===i&&(i=!1),this.onePassHasher.start().appendAsciiStr(t).end(i)},p._hex=function(t){var n,e,o,h,i=p.hexChars,r=p.hexOut;for(h=0;h<4;h+=1)for(e=8*h,n=t[h],o=0;o<8;o+=2)r[e+1+o]=i.charAt(15&n),r[e+0+o]=i.charAt(15&(n>>>=4)),n>>>=4;return r.join("")},p._md5cycle=function(t,i){var r=t[0],n=t[1],e=t[2],o=t[3];n=((n+=((e=((e+=((o=((o+=((r=((r+=(n&e|~n&o)+i[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&e)+i[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+i[2]+606105819|0)<<17|e>>>15)+o|0)&o|~e&r)+i[3]-1044525330|0)<<22|n>>>10)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n&e|~n&o)+i[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&e)+i[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+i[6]-1473231341|0)<<17|e>>>15)+o|0)&o|~e&r)+i[7]-45705983|0)<<22|n>>>10)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n&e|~n&o)+i[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&e)+i[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+i[10]-42063|0)<<17|e>>>15)+o|0)&o|~e&r)+i[11]-1990404162|0)<<22|n>>>10)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n&e|~n&o)+i[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&e)+i[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+i[14]-1502002290|0)<<17|e>>>15)+o|0)&o|~e&r)+i[15]+1236535329|0)<<22|n>>>10)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n&o|e&~o)+i[1]-165796510|0)<<5|r>>>27)+n|0)&e|n&~e)+i[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+i[11]+643717713|0)<<14|e>>>18)+o|0)&r|o&~r)+i[0]-373897302|0)<<20|n>>>12)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n&o|e&~o)+i[5]-701558691|0)<<5|r>>>27)+n|0)&e|n&~e)+i[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+i[15]-660478335|0)<<14|e>>>18)+o|0)&r|o&~r)+i[4]-405537848|0)<<20|n>>>12)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n&o|e&~o)+i[9]+568446438|0)<<5|r>>>27)+n|0)&e|n&~e)+i[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+i[3]-187363961|0)<<14|e>>>18)+o|0)&r|o&~r)+i[8]+1163531501|0)<<20|n>>>12)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n&o|e&~o)+i[13]-1444681467|0)<<5|r>>>27)+n|0)&e|n&~e)+i[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+i[7]+1735328473|0)<<14|e>>>18)+o|0)&r|o&~r)+i[12]-1926607734|0)<<20|n>>>12)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n^e^o)+i[5]-378558|0)<<4|r>>>28)+n|0)^n^e)+i[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+i[11]+1839030562|0)<<16|e>>>16)+o|0)^o^r)+i[14]-35309556|0)<<23|n>>>9)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n^e^o)+i[1]-1530992060|0)<<4|r>>>28)+n|0)^n^e)+i[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+i[7]-155497632|0)<<16|e>>>16)+o|0)^o^r)+i[10]-1094730640|0)<<23|n>>>9)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n^e^o)+i[13]+681279174|0)<<4|r>>>28)+n|0)^n^e)+i[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+i[3]-722521979|0)<<16|e>>>16)+o|0)^o^r)+i[6]+76029189|0)<<23|n>>>9)+e|0,n=((n+=((e=((e+=((o=((o+=((r=((r+=(n^e^o)+i[9]-640364487|0)<<4|r>>>28)+n|0)^n^e)+i[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+i[15]+530742520|0)<<16|e>>>16)+o|0)^o^r)+i[2]-995338651|0)<<23|n>>>9)+e|0,n=((n+=((o=((o+=(n^((r=((r+=(e^(n|~o))+i[0]-198630844|0)<<6|r>>>26)+n|0)|~e))+i[7]+1126891415|0)<<10|o>>>22)+r|0)^((e=((e+=(r^(o|~n))+i[14]-1416354905|0)<<15|e>>>17)+o|0)|~r))+i[5]-57434055|0)<<21|n>>>11)+e|0,n=((n+=((o=((o+=(n^((r=((r+=(e^(n|~o))+i[12]+1700485571|0)<<6|r>>>26)+n|0)|~e))+i[3]-1894986606|0)<<10|o>>>22)+r|0)^((e=((e+=(r^(o|~n))+i[10]-1051523|0)<<15|e>>>17)+o|0)|~r))+i[1]-2054922799|0)<<21|n>>>11)+e|0,n=((n+=((o=((o+=(n^((r=((r+=(e^(n|~o))+i[8]+1873313359|0)<<6|r>>>26)+n|0)|~e))+i[15]-30611744|0)<<10|o>>>22)+r|0)^((e=((e+=(r^(o|~n))+i[6]-1560198380|0)<<15|e>>>17)+o|0)|~r))+i[13]+1309151649|0)<<21|n>>>11)+e|0,n=((n+=((o=((o+=(n^((r=((r+=(e^(n|~o))+i[4]-145523070|0)<<6|r>>>26)+n|0)|~e))+i[11]-1120210379|0)<<10|o>>>22)+r|0)^((e=((e+=(r^(o|~n))+i[2]+718787259|0)<<15|e>>>17)+o|0)|~r))+i[9]-343485551|0)<<21|n>>>11)+e|0,t[0]=r+t[0]|0,t[1]=n+t[1]|0,t[2]=e+t[2]|0,t[3]=o+t[3]|0},p.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(p.stateIdentity),this},p.prototype.appendStr=function(t){var e,o,i=this._buffer8,r=this._buffer32,n=this._bufferLength;for(o=0;o<t.length;o+=1){if((e=t.charCodeAt(o))<128)i[n++]=e;else if(e<2048)i[n++]=192+(e>>>6),i[n++]=63&e|128;else if(e<55296||e>56319)i[n++]=224+(e>>>12),i[n++]=e>>>6&63|128,i[n++]=63&e|128;else{if((e=1024*(e-55296)+(t.charCodeAt(++o)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");i[n++]=240+(e>>>18),i[n++]=e>>>12&63|128,i[n++]=e>>>6&63|128,i[n++]=63&e|128}n>=64&&(this._dataLength+=64,p._md5cycle(this._state,r),n-=64,r[0]=r[16])}return this._bufferLength=n,this},p.prototype.appendAsciiStr=function(t){for(var e,i=this._buffer8,r=this._buffer32,n=this._bufferLength,o=0;;){for(e=Math.min(t.length-o,64-n);e--;)i[n++]=t.charCodeAt(o++);if(n<64)break;this._dataLength+=64,p._md5cycle(this._state,r),n=0}return this._bufferLength=n,this},p.prototype.appendByteArray=function(t){for(var e,i=this._buffer8,r=this._buffer32,n=this._bufferLength,o=0;;){for(e=Math.min(t.length-o,64-n);e--;)i[n++]=t[o++];if(n<64)break;this._dataLength+=64,p._md5cycle(this._state,r),n=0}return this._bufferLength=n,this},p.prototype.getState=function(){var t=this,i=t._state;return{buffer:String.fromCharCode.apply(null,t._buffer8),buflen:t._bufferLength,length:t._dataLength,state:[i[0],i[1],i[2],i[3]]}},p.prototype.setState=function(t){var e,i=t.buffer,r=t.state,n=this._state;for(this._dataLength=t.length,this._bufferLength=t.buflen,n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],e=0;e<i.length;e+=1)this._buffer8[e]=i.charCodeAt(e)},p.prototype.end=function(t){void 0===t&&(t=!1);var o,i=this._bufferLength,r=this._buffer8,n=this._buffer32,e=1+(i>>2);if(this._dataLength+=i,r[i]=128,r[i+1]=r[i+2]=r[i+3]=0,n.set(p.buffer32Identity.subarray(e),e),i>55&&(p._md5cycle(this._state,n),n.set(p.buffer32Identity)),(o=8*this._dataLength)<=4294967295)n[14]=o;else{var h=o.toString(16).match(/(.*?)(.{0,8})$/);if(null===h)return;var f=parseInt(h[2],16),d=parseInt(h[1],16)||0;n[14]=f,n[15]=d}return p._md5cycle(this._state,n),t?this._state:p._hex(this._state)},p.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),p.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),p.hexChars="0123456789abcdef",p.hexOut=[],p.onePassHasher=new p,p}();b.V=Z,"5d41402abc4b2a76b9719d911017c592"!==Z.hashStr("hello")&&console.error("Md5 self test failed.")},7204:(J,b,c)=>{c.r(b),c.d(b,{PassportModule:()=>mt});var Z=c(2080),p=c(2124),t=c(7716),i=c(3630),r=c(3423);let n=(()=>{class s{constructor(a,u,g){this.socialService=a,this.settingsSrv=u,this.route=g,this.type=""}ngOnInit(){this.type=this.route.snapshot.params.type,this.mockModel()}mockModel(){const a={token:"123456789",name:"cipchk",email:`${this.type}@${this.type}.com`,id:1e4,time:+new Date};this.settingsSrv.setUser(Object.assign(Object.assign({},this.settingsSrv.user),a)),this.socialService.callback(a)}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(p.VK),t.Y36(i.gb),t.Y36(r.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-callback"]],features:[t._Bn([p.VK])],decls:0,vars:0,template:function(a,u){},encapsulation:2}),s})();var e=c(665),o=c(5329),h=c(5887),f=c(6704),d=c(4514),v=c(7674),x=c(4453),C=c(9374);let y=(()=>{class s{constructor(a,u,g,m){this.tokenService=u,this.settings=g,this.router=m,this.f=a.group({password:[null,e.kI.required]})}get user(){return this.settings.user}submit(){for(const a in this.f.controls)this.f.controls[a].markAsDirty(),this.f.controls[a].updateValueAndValidity();this.f.valid&&(console.log("Valid!"),console.log(this.f.value),this.tokenService.set({token:"123"}),this.router.navigate(["dashboard"]))}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(e.qu),t.Y36(p.T),t.Y36(i.gb),t.Y36(r.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["passport-lock"]],decls:15,vars:11,consts:[[1,"ant-card","width-lg",2,"margin","0 auto"],[1,"ant-card-body"],[1,"avatar"],["nzIcon","user","nzSize","large",3,"nzSrc"],["nz-form","","role","form",1,"mt-md",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["nzSuffixIcon","lock"],["type","password","nz-input","","formControlName","password"],["nzType","flex","nzAlign","middle"],[2,"text-align","right",3,"nzOffset","nzSpan"],["nz-button","","nzType","primary",3,"disabled"]],template:function(a,u){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"nz-avatar",3),t.qZA(),t.TgZ(4,"form",4),t.NdJ("ngSubmit",function(){return u.submit()}),t.TgZ(5,"nz-form-item"),t.TgZ(6,"nz-form-control",5),t.ALo(7,"i18n"),t.TgZ(8,"nz-input-group",6),t._UZ(9,"input",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"nz-row",8),t.TgZ(11,"nz-col",9),t.TgZ(12,"button",10),t._uU(13),t.ALo(14,"i18n"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(3),t.Q6J("nzSrc",u.user.avatar),t.xp6(1),t.Q6J("formGroup",u.f),t.xp6(2),t.Q6J("nzErrorTip",t.lcZ(7,7,"validation.password.required")),t.xp6(5),t.Q6J("nzOffset",12)("nzSpan",12),t.xp6(1),t.Q6J("disabled",!u.f.valid),t.xp6(1),t.Oqu(t.lcZ(14,9,"app.lock")))},directives:[o.Dz,e._Y,e.JL,h.Lr,e.sg,f.SK,h.Nx,f.t3,h.Fd,d.w,v.gB,v.Zp,e.Fj,e.JJ,e.u,x.ix,C.dQ],pipes:[i.w5],styles:["[_nghost-%COMP%]     .ant-card-body{position:relative;margin-top:80px}[_nghost-%COMP%]     .avatar{position:absolute;top:-20px;left:50%;margin-left:-20px}"]}),s})();var O=c(7048),P=c(2340),F=c(9346),Q=c(5917),M=c(2157),N=c(1636),Y=c(2325),S=c(4828),_=c(8583),w=c(480);function B(s,l){if(1&s&&t._UZ(0,"nz-alert",11),2&s){const a=t.oxw();t.Q6J("nzType","error")("nzMessage",a.error)("nzShowIcon",!0)}}let U=(()=>{class s{constructor(a,u,g,m,z,A,T,ft,dt,vt,zt,_t){this.router=u,this.settingsService=g,this.socialService=m,this.reuseTabService=z,this.tokenService=A,this.startupSrv=T,this.http=ft,this.cdr=dt,this.apiService=vt,this.global=zt,this.socketHandler=_t,this.error="",this.type=0,this.loading=!1,this.count=0,this.form=a.group({userName:[null,[e.kI.required]],password:[null,[e.kI.required]],mobile:[null,[e.kI.required,e.kI.pattern(/^1\d{10}$/)]],captcha:[null,[e.kI.required]],remember:[!0]})}get userName(){return this.form.controls.userName}get password(){return this.form.controls.password}get mobile(){return this.form.controls.mobile}get captcha(){return this.form.controls.captcha}switch({index:a}){this.type=a}getCaptcha(){if(this.mobile.invalid)return this.mobile.markAsDirty({onlySelf:!0}),void this.mobile.updateValueAndValidity({onlySelf:!0});this.count=59,this.interval$=setInterval(()=>{this.count-=1,this.count<=0&&clearInterval(this.interval$)},1e3)}submit(){this.error="",this.loading=!0,this.apiService.login({phone:this.userName.value,password:F.V.hashStr(this.password.value),channel:"web"}).then(a=>{if(this.loading=!1,!a||!a.success)return this.error=a.message,void this.cdr.detectChanges();this.global.login(a.data),this.global.isLogin()&&this.socketHandler.init(),this.tokenService.set(a.data),this.startupSrv.load().subscribe(()=>{console.log("login"),window.location.reload()})})}open(a,u="href"){let g="",m="";switch(m=P.N.production?`https://ng-alain.github.io/ng-alain/#/passport/callback/${a}`:`http://localhost:4200/#/passport/callback/${a}`,a){case"auth0":g=`//cipchk.auth0.com/login?client=8gcNydIDzGBYxzqV0Vm1CX_RXH-wsWo5&redirect_uri=${decodeURIComponent(m)}`;break;case"github":g=`//github.com/login/oauth/authorize?client_id=9d6baae4b04a23fcafa2&response_type=code&redirect_uri=${decodeURIComponent(m)}`;break;case"weibo":g=`https://api.weibo.com/oauth2/authorize?client_id=1239507802&response_type=code&redirect_uri=${decodeURIComponent(m)}`}"window"===u?this.socialService.login(g,"/",{type:"window"}).subscribe(z=>{z&&(this.settingsService.setUser(z),this.router.navigateByUrl("/"))}):this.socialService.login(g,"/",{type:"href"})}ngOnDestroy(){this.interval$&&clearInterval(this.interval$)}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(e.qu),t.Y36(r.F0),t.Y36(i.gb),t.Y36(p.VK),t.Y36(O.Wu,8),t.Y36(p.T),t.Y36(Q.HS),t.Y36(i.lP),t.Y36(t.sBO),t.Y36(M.s),t.Y36(N.x),t.Y36(Y.l))},s.\u0275cmp=t.Xpm({type:s,selectors:[["passport-login"]],features:[t._Bn([p.VK])],decls:18,vars:10,consts:[["nz-form","","role","form",3,"formGroup","ngSubmit"],[1,"tabs",3,"nzAnimated","nzSelectChange"],[3,"nzTitle"],["class","mb-lg",3,"nzType","nzMessage","nzShowIcon",4,"ngIf"],["nzErrorTip","\u8bf7\u8f93\u5165\u624b\u673a\u53f7"],["nzSize","large","nzPrefixIcon","user"],["nz-input","","formControlName","userName","placeholder","\u8bf7\u8f93\u5165\u624b\u673a\u53f7"],["nzErrorTip","\u8bf7\u8f93\u5165\u5bc6\u7801"],["nzSize","large","nzPrefixIcon","lock"],["nz-input","","type","password","formControlName","password","placeholder","\u8bf7\u8f93\u5165\u5bc6\u7801"],["nz-button","","type","submit","nzType","primary","nzSize","large","nzBlock","",3,"nzLoading"],[1,"mb-lg",3,"nzType","nzMessage","nzShowIcon"]],template:function(a,u){1&a&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return u.submit()}),t.TgZ(1,"nz-tabset",1),t.NdJ("nzSelectChange",function(m){return u.switch(m)}),t.TgZ(2,"nz-tab",2),t.ALo(3,"i18n"),t.YNc(4,B,1,3,"nz-alert",3),t.TgZ(5,"nz-form-item"),t.TgZ(6,"nz-form-control",4),t.TgZ(7,"nz-input-group",5),t._UZ(8,"input",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"nz-form-item"),t.TgZ(10,"nz-form-control",7),t.TgZ(11,"nz-input-group",8),t._UZ(12,"input",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"nz-form-item"),t.TgZ(14,"nz-form-item"),t.TgZ(15,"button",10),t._uU(16),t.ALo(17,"i18n"),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.Q6J("formGroup",u.form),t.xp6(1),t.Q6J("nzAnimated",!1),t.xp6(1),t.Q6J("nzTitle",t.lcZ(3,6,"app.login.tab-login-credentials")),t.xp6(2),t.Q6J("ngIf",u.error),t.xp6(11),t.Q6J("nzLoading",u.loading),t.xp6(1),t.hij(" ",t.lcZ(17,8,"app.login.login")," "))},directives:[e._Y,e.JL,h.Lr,e.sg,S.xH,S.xw,_.O5,f.SK,h.Nx,f.t3,h.Fd,d.w,v.gB,v.Zp,e.Fj,e.JJ,e.u,x.ix,C.dQ,w.r],pipes:[i.w5],styles:["[_nghost-%COMP%]{display:block;width:368px;margin:0 auto}[_nghost-%COMP%]     .ant-tabs .ant-tabs-bar{margin-bottom:24px;text-align:center;border-bottom:0}[_nghost-%COMP%]     .ant-tabs-tab{font-size:16px;line-height:24px}[_nghost-%COMP%]     .ant-input-affix-wrapper .ant-input:not(:first-child){padding-left:4px}[_nghost-%COMP%]     .icon{margin-left:16px;color:#0003;font-size:24px;vertical-align:middle;cursor:pointer;transition:color .3s}[_nghost-%COMP%]     .icon:hover{color:#1890ff}[_nghost-%COMP%]     .other{margin-top:24px;line-height:22px;text-align:left}[_nghost-%COMP%]     .other nz-tooltip{vertical-align:middle}[_nghost-%COMP%]     .other .register{float:right}[data-theme=dark]   [_nghost-%COMP%]     .icon{color:#fff3}[data-theme=dark]   [_nghost-%COMP%]     .icon:hover{color:#fff}"],changeDetection:0}),s})();var R=c(1551),V=c(8058),E=c(3797);function $(s,l){if(1&s&&(t.TgZ(0,"div",4),t._uU(1),t.ALo(2,"i18n"),t.qZA()),2&s){const a=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,"app.register-result.msg",a.params)," ")}}let L=(()=>{class s{constructor(a,u){this.msg=u,this.params={email:""},this.email="",this.params.email=this.email=a.snapshot.queryParams.email||"ng-alain@example.com"}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(r.gz),t.Y36(V.dD))},s.\u0275cmp=t.Xpm({type:s,selectors:[["passport-register-result"]],decls:10,vars:11,consts:[["type","success",3,"title","description"],["title",""],["nz-button","","nzSize","large",3,"nzType","click"],["routerLink","/","nz-button","","nzSize","large"],[1,"title",2,"font-size","20px"]],template:function(a,u){if(1&a&&(t.TgZ(0,"result",0),t.ALo(1,"i18n"),t.YNc(2,$,3,4,"ng-template",null,1,t.W1O),t.TgZ(4,"button",2),t.NdJ("click",function(){return u.msg.success("email")}),t._uU(5),t.ALo(6,"i18n"),t.qZA(),t.TgZ(7,"button",3),t._uU(8),t.ALo(9,"i18n"),t.qZA(),t.qZA()),2&a){const g=t.MAs(3);t.s9C("description",t.lcZ(1,5,"app.register-result.activation-email")),t.Q6J("title",g),t.xp6(4),t.Q6J("nzType","primary"),t.xp6(1),t.hij(" ",t.lcZ(6,7,"app.register-result.view-mailbox")," "),t.xp6(3),t.hij(" ",t.lcZ(9,9,"app.register-result.back-home")," ")}},directives:[E.N,x.ix,C.dQ,d.w,r.rH],pipes:[i.w5],encapsulation:2}),s})();function D(s,l){return a=>{const u=a.get(s),g=a.get(l);return g.errors&&!g.errors.matchControl||g.setErrors(u.value!==g.value?{matchControl:!0}:null),null}}var j=c(8939),W=c(8381),k=c(2281),I=c(269);function G(s,l){if(1&s&&t._UZ(0,"nz-alert",23),2&s){const a=t.oxw();t.Q6J("nzType","error")("nzMessage",a.error)("nzShowIcon",!0)}}function H(s,l){1&s&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.email.required")))}function K(s,l){1&s&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.email.wrong-format")))}function X(s,l){if(1&s&&(t.YNc(0,H,3,3,"ng-container",24),t.YNc(1,K,3,3,"ng-container",24)),2&s){const a=l.$implicit;t.Q6J("ngIf",null==a.errors?null:a.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.errors?null:a.errors.email)}}function tt(s,l){1&s&&(t.TgZ(0,"div",32),t._uU(1),t.ALo(2,"i18n"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.password.strength.strong")))}function et(s,l){1&s&&(t.TgZ(0,"div",33),t._uU(1),t.ALo(2,"i18n"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.password.strength.medium")))}function nt(s,l){1&s&&(t.TgZ(0,"div",34),t._uU(1),t.ALo(2,"i18n"),t.qZA()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.password.strength.short")))}function rt(s,l){if(1&s&&(t.TgZ(0,"div",25),t.ynx(1,26),t.YNc(2,tt,3,3,"div",27),t.YNc(3,et,3,3,"div",28),t.YNc(4,nt,3,3,"div",29),t.BQk(),t.TgZ(5,"div"),t._UZ(6,"nz-progress",30),t.qZA(),t.TgZ(7,"p",31),t._uU(8),t.ALo(9,"i18n"),t.qZA(),t.qZA()),2&s){const a=t.oxw();t.xp6(1),t.Q6J("ngSwitch",a.status),t.xp6(1),t.Q6J("ngSwitchCase","ok"),t.xp6(1),t.Q6J("ngSwitchCase","pass"),t.xp6(2),t.Gre("progress-",a.status,""),t.xp6(1),t.Q6J("nzPercent",a.progress)("nzStatus",a.passwordProgressMap[a.status])("nzStrokeWidth",6)("nzShowInfo",!1),t.xp6(2),t.Oqu(t.lcZ(9,11,"validation.password.strength.msg"))}}function ot(s,l){1&s&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.confirm-password.required")))}function it(s,l){1&s&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.password.twice")))}function st(s,l){if(1&s&&(t.YNc(0,ot,3,3,"ng-container",24),t.YNc(1,it,3,3,"ng-container",24)),2&s){const a=l.$implicit;t.Q6J("ngIf",null==a.errors?null:a.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.errors?null:a.errors.matchControl)}}function at(s,l){1&s&&(t.TgZ(0,"nz-select",35),t._UZ(1,"nz-option",36),t._UZ(2,"nz-option",36),t.qZA()),2&s&&(t.xp6(1),t.Q6J("nzLabel","+86")("nzValue","+86"),t.xp6(1),t.Q6J("nzLabel","+87")("nzValue","+87"))}function lt(s,l){1&s&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.phone-number.required")))}function ut(s,l){1&s&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&s&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.phone-number.wrong-format")))}function pt(s,l){if(1&s&&(t.YNc(0,lt,3,3,"ng-container",24),t.YNc(1,ut,3,3,"ng-container",24)),2&s){const a=l.$implicit;t.Q6J("ngIf",null==a.errors?null:a.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.errors?null:a.errors.pattern)}}const ct=function(){return{"width.px":240}};const gt=[{path:"",component:R.W,children:[{path:"",redirectTo:"login"},{path:"login",component:U,data:{title:"\u767b\u5f55",titleI18n:"app.login.login"}},{path:"register",component:(()=>{class s{constructor(a,u,g,m){this.router=u,this.http=g,this.cdr=m,this.error="",this.type=0,this.loading=!1,this.visible=!1,this.status="pool",this.progress=0,this.passwordProgressMap={ok:"success",pass:"normal",pool:"exception"},this.count=0,this.form=a.group({mail:[null,[e.kI.required,e.kI.email]],password:[null,[e.kI.required,e.kI.minLength(6),s.checkPassword.bind(this)]],confirm:[null,[e.kI.required,e.kI.minLength(6)]],mobilePrefix:["+86"],mobile:[null,[e.kI.required,e.kI.pattern(/^1\d{10}$/)]],captcha:[null,[e.kI.required]]},{validators:D("password","confirm")})}get mail(){return this.form.controls.mail}get password(){return this.form.controls.password}get confirm(){return this.form.controls.confirm}get mobile(){return this.form.controls.mobile}get captcha(){return this.form.controls.captcha}static checkPassword(a){if(!a)return null;const u=this;u.visible=!!a.value,u.status=a.value&&a.value.length>9?"ok":a.value&&a.value.length>5?"pass":"pool",u.visible&&(u.progress=10*a.value.length>100?100:10*a.value.length)}getCaptcha(){if(this.mobile.invalid)return this.mobile.markAsDirty({onlySelf:!0}),void this.mobile.updateValueAndValidity({onlySelf:!0});this.count=59,this.cdr.detectChanges(),this.interval$=setInterval(()=>{this.count-=1,this.cdr.detectChanges(),this.count<=0&&clearInterval(this.interval$)},1e3)}submit(){if(this.error="",Object.keys(this.form.controls).forEach(u=>{this.form.controls[u].markAsDirty(),this.form.controls[u].updateValueAndValidity()}),this.form.invalid)return;const a=this.form.value;this.loading=!0,this.cdr.detectChanges(),this.http.post("/register?_allow_anonymous=true",a).pipe((0,j.x)(()=>{this.loading=!1,this.cdr.detectChanges()})).subscribe(()=>{this.router.navigate(["passport","register-result"],{queryParams:{email:a.mail}})})}ngOnDestroy(){this.interval$&&clearInterval(this.interval$)}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(e.qu),t.Y36(r.F0),t.Y36(i.lP),t.Y36(t.sBO))},s.\u0275cmp=t.Xpm({type:s,selectors:[["passport-register"]],decls:50,vars:34,consts:[["nz-form","","role","form",3,"formGroup","ngSubmit"],["class","mb-lg",3,"nzType","nzMessage","nzShowIcon",4,"ngIf"],[3,"nzErrorTip"],["nzSize","large","nzAddonBeforeIcon","user"],["nz-input","","formControlName","mail","placeholder","Email"],["mailErrorTip",""],["nzSize","large","nzAddonBeforeIcon","lock","nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","focus","nzPopoverOverlayClassName","register-password-cdk",3,"nzPopoverVisible","nzPopoverOverlayStyle","nzPopoverContent","nzPopoverVisibleChange"],["nz-input","","type","password","formControlName","password","placeholder","Password"],["pwdCdkTpl",""],["nzSize","large","nzAddonBeforeIcon","lock"],["nz-input","","type","password","formControlName","confirm","placeholder","Confirm Password"],["confirmErrorTip",""],["nzSize","large",3,"nzAddOnBefore"],["addOnBeforeTemplate",""],["formControlName","mobile","nz-input","","placeholder","Phone number"],["mobileErrorTip",""],[3,"nzGutter"],[3,"nzSpan"],["nzSize","large","nzAddonBeforeIcon","mail"],["nz-input","","formControlName","captcha","placeholder","Captcha"],["type","button","nz-button","","nzSize","large","nzBlock","",3,"disabled","nzLoading","click"],["nz-button","","nzType","primary","nzSize","large","type","submit",1,"submit",3,"nzLoading"],["routerLink","/passport/login",1,"login"],[1,"mb-lg",3,"nzType","nzMessage","nzShowIcon"],[4,"ngIf"],[2,"padding","4px 0"],[3,"ngSwitch"],["class","success",4,"ngSwitchCase"],["class","warning",4,"ngSwitchCase"],["class","error",4,"ngSwitchDefault"],[3,"nzPercent","nzStatus","nzStrokeWidth","nzShowInfo"],[1,"mt-sm"],[1,"success"],[1,"warning"],[1,"error"],["formControlName","mobilePrefix",2,"width","100px"],[3,"nzLabel","nzValue"]],template:function(a,u){if(1&a&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"i18n"),t.qZA(),t.TgZ(3,"form",0),t.NdJ("ngSubmit",function(){return u.submit()}),t.YNc(4,G,1,3,"nz-alert",1),t.TgZ(5,"nz-form-item"),t.TgZ(6,"nz-form-control",2),t.TgZ(7,"nz-input-group",3),t._UZ(8,"input",4),t.qZA(),t.YNc(9,X,2,2,"ng-template",null,5,t.W1O),t.qZA(),t.qZA(),t.TgZ(11,"nz-form-item"),t.TgZ(12,"nz-form-control",2),t.ALo(13,"i18n"),t.TgZ(14,"nz-input-group",6),t.NdJ("nzPopoverVisibleChange",function(m){return u.visible=m}),t._UZ(15,"input",7),t.qZA(),t.YNc(16,rt,10,13,"ng-template",null,8,t.W1O),t.qZA(),t.qZA(),t.TgZ(18,"nz-form-item"),t.TgZ(19,"nz-form-control",2),t.TgZ(20,"nz-input-group",9),t._UZ(21,"input",10),t.qZA(),t.YNc(22,st,2,2,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.TgZ(24,"nz-form-item"),t.TgZ(25,"nz-form-control",2),t.TgZ(26,"nz-input-group",12),t.YNc(27,at,3,4,"ng-template",null,13,t.W1O),t._UZ(29,"input",14),t.qZA(),t.YNc(30,pt,2,2,"ng-template",null,15,t.W1O),t.qZA(),t.qZA(),t.TgZ(32,"nz-form-item"),t.TgZ(33,"nz-form-control",2),t.ALo(34,"i18n"),t.TgZ(35,"nz-row",16),t.TgZ(36,"nz-col",17),t.TgZ(37,"nz-input-group",18),t._UZ(38,"input",19),t.qZA(),t.qZA(),t.TgZ(39,"nz-col",17),t.TgZ(40,"button",20),t.NdJ("click",function(){return u.getCaptcha()}),t._uU(41),t.ALo(42,"i18n"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"nz-form-item"),t.TgZ(44,"button",21),t._uU(45),t.ALo(46,"i18n"),t.qZA(),t.TgZ(47,"a",22),t._uU(48),t.ALo(49,"i18n"),t.qZA(),t.qZA(),t.qZA()),2&a){const g=t.MAs(10),m=t.MAs(17),z=t.MAs(23),A=t.MAs(28),T=t.MAs(31);t.xp6(1),t.Oqu(t.lcZ(2,21,"app.register.register")),t.xp6(2),t.Q6J("formGroup",u.form),t.xp6(1),t.Q6J("ngIf",u.error),t.xp6(2),t.Q6J("nzErrorTip",g),t.xp6(6),t.Q6J("nzErrorTip",t.lcZ(13,23,"validation.password.required")),t.xp6(2),t.Q6J("nzPopoverVisible",u.visible)("nzPopoverOverlayStyle",t.DdM(33,ct))("nzPopoverContent",m),t.xp6(5),t.Q6J("nzErrorTip",z),t.xp6(6),t.Q6J("nzErrorTip",T),t.xp6(1),t.Q6J("nzAddOnBefore",A),t.xp6(7),t.Q6J("nzErrorTip",t.lcZ(34,25,"validation.verification-code.required")),t.xp6(2),t.Q6J("nzGutter",8),t.xp6(1),t.Q6J("nzSpan",16),t.xp6(3),t.Q6J("nzSpan",8),t.xp6(1),t.Q6J("disabled",u.count>0)("nzLoading",u.loading),t.xp6(1),t.hij(" ",u.count?u.count+"s":t.lcZ(42,27,"app.register.get-verification-code")," "),t.xp6(3),t.Q6J("nzLoading",u.loading),t.xp6(1),t.hij(" ",t.lcZ(46,29,"app.register.register")," "),t.xp6(3),t.Oqu(t.lcZ(49,31,"app.register.sign-in"))}},directives:[e._Y,e.JL,h.Lr,e.sg,_.O5,f.SK,h.Nx,f.t3,h.Fd,d.w,v.gB,v.Zp,e.Fj,e.JJ,e.u,W.lU,x.ix,C.dQ,r.yS,w.r,_.RF,_.n9,_.ED,k.M,I.Vq,I.Ip],pipes:[i.w5],styles:["[_nghost-%COMP%]{display:block;width:368px;margin:0 auto}[_nghost-%COMP%]     h3{margin-bottom:20px;font-size:16px}[_nghost-%COMP%]     .submit{width:50%}[_nghost-%COMP%]     .login{float:right;line-height:40px}  .register-password-cdk .success,   .register-password-cdk .warning,   .register-password-cdk .error{transition:color .3s}  .register-password-cdk .success{color:#52c41a}  .register-password-cdk .warning{color:#faad14}  .register-password-cdk .error{color:#ff4d4f}  .register-password-cdk .progress-pass>.progress .ant-progress-bg{background-color:#faad14}"],changeDetection:0}),s})(),data:{title:"\u6ce8\u518c",titleI18n:"app.register.register"}},{path:"register-result",component:L,data:{title:"\u6ce8\u518c\u7ed3\u679c",titleI18n:"app.register.register"}},{path:"lock",component:y,data:{title:"\u9501\u5c4f",titleI18n:"app.lock"}}]},{path:"/detail/:detailId",component:n}];let ht=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[r.Bz.forChild(gt)],r.Bz]}),s})(),mt=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[Z.m8,ht]]}),s})()}}]);