"use strict";(self.webpackChunkng_alain=self.webpackChunkng_alain||[]).push([[276],{7276:(Bt,b,f)=>{f.r(b),f.d(b,{RealTimeMapModule:()=>Dt});var U=f(2080),I=f(3423),N=f(4762),w=f(2325);function C(){return(C=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])}return i}).apply(this,arguments)}var F={isDecoded:!1,hasStarted:!1,source:null,gainNode:null},O=function(o,e){return"suspended"===o.state?o.resume().then(function(){return e.start(0)}):e.start(0)};const Q=function(o){var e=o.file,a=o.volume,n=void 0===a?1:a,s=o.autoPlay,l=void 0!==s&&s,r=o.loop,p=void 0!==r&&r,d=function(){var o=window.AudioContext||window.webkitAudioContext;return o||function(o){throw new Error("`ts-audio`: Your browser doesn't support AudioContext - https://bit.ly/2YWmpnX")}(),new o}(),c=C({},F),g=function(){var o={};return{listener:function(a,n){o[a]=n},emit:function(a,n){var s;null==(s=o[a])||s.call(o,n)}}}(),y=function(o,e){return{ready:function(n){o.listener("decoded",n)},start:function(n){o.listener("start",n)},end:function(n){o.listener("end",n)},state:function(n){e&&(e.onstatechange=function(){return n({data:e.state})})}}}(g,d);return{play:function(){if(c.hasStarted)d.resume();else{!function(o,e,a,n){var s=n.source=o.createBufferSource(),l=n.gainNode=o.createGain();l.gain.value=e,l.connect(o.destination),s.connect(l),s.onended=function(){n.hasStarted=!1,a.emit("end",{data:null})}}(d,n,g,c);var u=c.source;u&&(function(u){c.isDecoded=!1,function(o){return fetch(o).then(function(e){if(!e.ok)throw new Error("HTTP error, status = "+e.status);return e.arrayBuffer()})}(e).then(function(m){return function(o,e,a,n,s,l,r){o.decodeAudioData(a,function(c){e.buffer=c,e.loop=s,l.isDecoded=!0,r.emit("decoded",{data:c}),n&&e.start(0)},console.error)}(d,u,m,l,p,c,g)}).catch(console.error)}(u),c.isDecoded?O(d,u):g.listener("decoded",function(){return O(d,u)}),c.hasStarted=!0,g.emit("start",{data:null}))}},pause:function(){d.suspend()},stop:function(){var u;c.hasStarted&&(null==(u=c.source)||u.stop(0))},on:function(u,m){var x;null==(x=y[u])||x.call(y,m)},get volume(){var h,u;return null!=(h=null==(u=c.gainNode)?void 0:u.gain.value)?h:0},set volume(h){c.gainNode&&(c.gainNode.gain.value=h)},get loop(){var h,u;return null!=(h=null==(u=c.source)?void 0:u.loop)&&h},set loop(h){c.source&&(c.source.loop=h)},get state(){return d.state}}};var _=f(9038),t=f(7716),V=f(2157),W=f(1147),j=f(4755),G=f(1636),M=f(8583),A=f(3654),E=f(6704),K=f(7420),X=f(4453),tt=f(9374),et=f(4514);function at(i,o){if(1&i&&(t.TgZ(0,"span",48),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.HOy(" \u661f\u671f",e.weekMap[e.weather.week]," ",e.weather.dayWeather," ",e.weather.nightTemp,"\u2103 -",e.weather.dayTemp,"\u2103 ")}}function it(i,o){if(1&i&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" \u7cfb\u7edf\u62a4\u822a\u65f6\u95f4:",e.guardDays,"\u5929 ")}}function nt(i,o){if(1&i&&(t.TgZ(0,"span",49),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" \u503c\u73ed\u4eba\u5458:",e.user.name,"(",e.user.charatarName,") ")}}function ot(i,o){if(1&i&&(t.TgZ(0,"div",55),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.place?e.place:"\u65e0")}}function st(i,o){if(1&i&&(t.TgZ(0,"div",55),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.checkRemark)}}const lt=function(i,o){return{colorRed:i,colorOrange:o}};function rt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr",50),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",51),t.YNc(6,ot,2,1,"div",52),t.TgZ(7,"span",53),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"td",51),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t.YNc(15,st,2,1,"div",52),t.TgZ(16,"span",53),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"td"),t.TgZ(19,"button",54),t.NdJ("click",function(){return t.CHM(e),t.oxw().showVideo()}),t._uU(20," \u89c6\u9891"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=o.index,n=t.oxw();t.Q6J("ngClass",t.WLB(14,lt,0==a&&n.isRed,0==a&&n.isOrange)),t.xp6(2),t.hij(" ",e.orgName," "),t.xp6(2),t.hij(" ",e.type," "),t.xp6(2),t.Q6J("ngIf",e.place),t.xp6(1),t.s9C("nzTooltipTitle",e.place),t.xp6(1),t.Oqu(e.place?e.place:"\u65e0"),t.xp6(2),t.hij(" ",t.xi3(11,11,e.lastReportTime,"MM/dd HH:mm:ss")," "),t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngIf",e.check),t.xp6(1),t.s9C("nzTooltipTitle",e.checkRemark),t.xp6(1),t.Oqu(e.checkRemark)}}function ct(i,o){1&i&&(t.TgZ(0,"h6",56),t.TgZ(1,"p",57),t._uU(2,"\u6682\u65e0\u6570\u636e"),t.qZA(),t.qZA())}function pt(i,o){1&i&&(t.TgZ(0,"h6",58),t._UZ(1,"img",59),t.qZA())}function dt(i,o){1&i&&(t.TgZ(0,"span",60),t.O4$(),t.TgZ(1,"svg",61),t._UZ(2,"path",62),t.qZA(),t.qZA())}function ht(i,o){1&i&&(t.TgZ(0,"span",63),t.O4$(),t.TgZ(1,"svg",64),t._UZ(2,"path",65),t.qZA(),t.qZA())}function ut(i,o){if(1&i&&(t.TgZ(0,"span",66),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.lastMonthNum,"% ")}}function gt(i,o){if(1&i&&(t.TgZ(0,"span",67),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.lastMonthNum,"% ")}}function mt(i,o){1&i&&(t.TgZ(0,"span",68),t._uU(1," \u8f83\u4e0a\u4e2a\u6708\u589e\u52a0 "),t.qZA())}function ft(i,o){1&i&&(t.TgZ(0,"span",68),t._uU(1," \u8f83\u4e0a\u4e2a\u6708\u51cf\u5c11 "),t.qZA())}function vt(i,o){1&i&&(t.TgZ(0,"span",60),t.O4$(),t.TgZ(1,"svg",61),t._UZ(2,"path",62),t.qZA(),t.qZA())}function xt(i,o){1&i&&(t.TgZ(0,"span",63),t.O4$(),t.TgZ(1,"svg",64),t._UZ(2,"path",65),t.qZA(),t.qZA())}function Tt(i,o){if(1&i&&(t.TgZ(0,"span",66),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.devicelastMonthNum,"% ")}}function yt(i,o){if(1&i&&(t.TgZ(0,"span",67),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.devicelastMonthNum,"% ")}}function Mt(i,o){1&i&&(t.TgZ(0,"span",68),t._uU(1," \u8f83\u4e0a\u4e2a\u6708\u589e\u52a0 "),t.qZA())}function At(i,o){1&i&&(t.TgZ(0,"span",68),t._uU(1," \u8f83\u4e0a\u4e2a\u6708\u51cf\u5c11 "),t.qZA())}function Ct(i,o){1&i&&(t.TgZ(0,"span",60),t.O4$(),t.TgZ(1,"svg",61),t._UZ(2,"path",62),t.qZA(),t.qZA())}function Zt(i,o){1&i&&(t.TgZ(0,"span",63),t.O4$(),t.TgZ(1,"svg",64),t._UZ(2,"path",65),t.qZA(),t.qZA())}function _t(i,o){if(1&i&&(t.TgZ(0,"span",66),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.alarmAndWarnLastNum,"% ")}}function St(i,o){if(1&i&&(t.TgZ(0,"span",67),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.alarmAndWarnLastNum,"% ")}}function bt(i,o){1&i&&(t.TgZ(0,"span",68),t._uU(1," \u8f83\u4e0a\u4e2a\u6708\u589e\u52a0 "),t.qZA())}function It(i,o){1&i&&(t.TgZ(0,"span",68),t._uU(1," \u8f83\u4e0a\u4e2a\u6708\u51cf\u5c11 "),t.qZA())}function wt(i,o){1&i&&(t.TgZ(0,"span",60),t.O4$(),t.TgZ(1,"svg",61),t._UZ(2,"path",62),t.qZA(),t.qZA())}function kt(i,o){1&i&&(t.TgZ(0,"span",63),t.O4$(),t.TgZ(1,"svg",64),t._UZ(2,"path",65),t.qZA(),t.qZA())}function Ot(i,o){if(1&i&&(t.TgZ(0,"span",66),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.successCheckLastMonth,"% ")}}function Et(i,o){if(1&i&&(t.TgZ(0,"span",67),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.successCheckLastMonth,"% ")}}function Ut(i,o){1&i&&(t.TgZ(0,"span",68),t._uU(1," \u8f83\u4e0a\u4e2a\u6708\u589e\u52a0 "),t.qZA())}function Nt(i,o){1&i&&(t.TgZ(0,"span",68),t._uU(1," \u8f83\u4e0a\u4e2a\u6708\u51cf\u5c11 "),t.qZA())}const T=function(i){return{height:i}},Pt=function(i){return{display:i}};let S=(()=>{class i{constructor(e,a,n,s,l){this.apiService=e,this.enumService=a,this.events=n,this.cdr=s,this.global=l,this.total=0,this.pageIndex=1,this.pageSize=0,this.dateText="",this.accusativeType="",this.pageIndexHistory=1,this.time=Date.now(),this.interval=void 0,this.audio=void 0,this.audioType="",this.isRed=!1,this.isOrange=!1,this.isYellow=!1,this.rooms=0,this.isVisible=!1,this.weekMap={1:"\u4e00",2:"\u4e8c",3:"\u4e09",4:"\u56db",5:"\u4e94",6:"\u516d",7:"\u65e5"},this.teadListHistory=[{name:"\u5904\u7406\u65f6\u95f4"},{name:"\u7c7b\u578b"},{name:"\u5904\u7406\u4eba"},{name:"\u5904\u7406\u65b9\u5f0f"},{name:"\u5904\u7406\u5907\u6ce8"}],this.keyNameListHistory=[{type:"time",name:"createTime"},{type:"text",name:"userTypeText"},{type:"text",name:"subjectName"},{type:"text",name:"processTypeText"},{type:"tooltip",name:"content"}],this.pageSizeHistory=10,this.containerId=`${(new Date).getTime()}`,this.scale=16,this.address="",this.searchText="",this.moveBySelect=!1,this.searchItems=[],this.messageText="",this.boxShow="none",this.mapHeight="350px",this.colorMap={FIRE_WARN:"yellow",FIRE_ALARM:"red",DEVICE_FAULT:"orange"},this.centerName="",this.isUp=!0,this.isDeviceUp=!1,this.devicelastMonthNum=0,this.alarmAndWarnLastNum=0,this.isAlarmUp=!1,this.guardDays=0,this.successCheck=0,this.successCheckLastMonth=0,this.isCheckUp=!1,this.tebleHeight="200px",this.rightBoxHeight="300px",this.resucerChartsInfo=!1,this.pageSize=7,this.refreshInterval=null,this.dataSet5=[],this.industryCategoryMap={},this.riskSourceMap={},this.message={},this.idListAll=[],this.idList=[],this.idListWarn=[],this.idListFault=[],this.orgId=7,this.checkResultMap={0:"\u672a\u786e\u8ba4",1:"\u706b\u8b66",2:"\u8bef\u62a5"},this.dataSet=[],this.teadList=[{name:"\u8054\u7f51\u5355\u4f4d"},{name:"\u5b89\u88c5\u4f4d\u7f6e"},{name:"\u4e0a\u62a5\u65f6\u95f4"},{name:"\u6d88\u606f\u7c7b\u578b"},{name:"\u5904\u7406\u72b6\u6001"},{name:"\u6d88\u9632\u89c6\u9891"}],this.keyNameList=[{type:"text",name:"orgName"},{type:"text",name:"place"},{type:"time",name:"lastReportTime"},{type:"text",name:"name"},{type:"text",name:"checkRemark"},{type:"buttonList",buttons:[{text:"\u89c6\u9891",index:1}]}],this.messageStatusMap={},this.operationMap={},this.orgInfo={},this.hanlder=(...r)=>{this.onContentChange(r[0])},this.events.on(w.l.MESSAGE_TYPE.Message,this.hanlder),this.mapOptions={zoom:this.scale},this.lng=120.133718,this.lat=30.261314,this.map=void 0,this.placeInfo={},this.locationCache=[0,0],this.messageTypeMap={FIRE_WARN:"\u9884\u8b66",EVENT:"\u4e8b\u4ef6",FIRE_ALARM:"\u544a\u8b66",DEVICE_FAULT:"\u6545\u969c"}}getTrClass(e,a){0==a&&console.log(e)}ngOnDestroy(){this.interval&&clearInterval(this.interval),this.timeout&&clearInterval(this.timeout),this.stopSong(),this.playr=null,this.events.destroyListener(w.l.MESSAGE_TYPE.Message,this.hanlder)}getAccountList3(e){this.apiService.getAccountList3(e).then(a=>{a&&a.data&&(console.log("\u5355\u4f4d\u767b\u5f55\u7684\u4eba"),console.log(a))})}ngAfterViewInit(){switch(this.mapHeight=(document.documentElement.clientHeight-158)/2+"px",this.tebleHeight=(document.documentElement.clientHeight-178)/2+"px",this.rightBoxHeight=document.documentElement.clientHeight-70-35+"px",this.rightBoxItemHeight=(document.documentElement.clientHeight-70-35)/4+"px",this.cdr.detectChanges(),this.global.getUserInfo().category){case"OP":this.apiService.getOperationById(this.global.getUserInfo().operateId).then(e=>{if(e&&e.data){if(this.guardDays=Math.ceil(((new Date).getTime()-e.data.createTime)/864e5),this.centerName="\u6d88\u6613\u4e91\u6d88\u9632\u6570\u5b57\u5316SaaS\u670d\u52a1\u5e73\u53f0\u2014\u2014["+e.data.name+"]",console.log(e.data),this.lng=e.data.longitude?e.data.longitude:this.lng,this.lat=e.data.latitude?e.data.latitude:this.lat,this.initMap([this.lng,this.lat]),this.getResucerCharts({operateId:e.data.id}),e.data.provinceId&&e.data.cityId&&e.data.districtId){let l={name:this.enumService.getDistrict(e.data.provinceId,e.data.cityId,e.data.districtId).name,color:"#ccc"};this.setMapArea(l.name,l.color)}else{let s={name:"\u897f\u6e56\u533a",color:"#ccc"};this.setMapArea(s.name,s.color)}let a=new Date(new Date((new Date).toLocaleDateString()).getTime()).getTime(),n=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1).getTime();this.getAccountList3({operateId:e.data.id,size:10,page:0,createTimeStart:a,createTimeEnd:n})}else this.centerName="\u6d88\u6613\u4e91\u6d88\u9632\u6570\u5b57\u5316SaaS\u670d\u52a1\u5e73\u53f0"});break;case"ORG":this.apiService.findOrgById(this.global.getUserInfo().orgId).then(e=>{if(e&&e.data){let a=new Date(new Date((new Date).toLocaleDateString()).getTime()).getTime(),n=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1).getTime();if(this.getAccountList3({operateId:e.data.id,size:10,page:0,createTimeStart:a,createTimeEnd:n}),this.getResucerCharts({operateId:e.data.operateId}),this.centerName="\u6d88\u6613\u4e91\u6d88\u9632\u6570\u5b57\u5316SaaS\u670d\u52a1\u5e73\u53f0\u2014\u2014["+this.global.getUserInfo().orgName+"]",this.lng=e.data.longitude?e.data.longitude:this.lng,this.lat=e.data.latitude?e.data.latitude:this.lat,this.initMap([this.lng,this.lat]),e.data.provinceId&&e.data.cityId&&e.data.districtId){let l={name:this.enumService.getDistrict(e.data.provinceId,e.data.cityId,e.data.districtId).name,color:"#ccc"};this.setMapArea(l.name,l.color)}else{let s={name:"\u897f\u6e56\u533a",color:"#ccc"};this.setMapArea(s.name,s.color)}this.guardDays=Math.ceil(((new Date).getTime()-e.data.createTime)/864e5)}})}}initMap(e){this.position=new window.AMap.LngLat(this.lng,this.lat),this.locationCache=e,this.mapOptions.center=e,this.locationChange(this.lng,this.lat),this.mapOptions.zoom=12,this.map=new AMap.Map(this.containerId,this.mapOptions),this.map.setMapStyle("amap://styles/whitesmoke"),this.rescuePointGetList()}setMapArea(e,a){let n=null,s=[];n||(n=new AMap.DistrictSearch({subdistrict:0,extensions:"all",level:"district"})),console.log(n),n.setLevel("district"),n.search(e,(l,r)=>{this.map.remove(s),s=[];var p=r.districtList[0].boundaries;if(p)for(var d=0,c=p.length;d<c;d++){var g=new AMap.Polygon({strokeWeight:1,path:p[d],fillOpacity:.4,fillColor:a,strokeColor:"#0091ea"});s.push(g)}this.map.add(s)})}clearMarker(){this.marker&&this.map.remove(this.marker)}locationChange(e,a){}onContentChange(e){console.log(e),this.orgId=e.data.orgId,e.id&&this.idListAll.push(e),console.log(this.idListAll),this.playSong(e.id),this.setMarker(e.id),this.orgId&&this.getOrgInfo()}playSong(e){if(e!==this.audioType){if(this.audio)try{this.audio.stop()}catch(l){console.log("\u6682\u505c\u97f3\u4e50\u51fa\u9519\u4e86")}finally{this.audio=void 0}let n="",s="";switch(e){case"FIRE_WARN":n="./assets/warn.mp3",s="alert-warning";break;case"FIRE_ALARM":n="./assets/alarm.mp3",s="alert-danger";break;case"DEVICE_FAULT":n="./assets/fault.mp3",s="alert-secondary"}this.audio=Q({file:n,loop:!0,volume:1,autoPlay:!0}),this.audioType=e;try{this.audio.play()}catch(l){}}}stopSong(){if(this.audioType="",this.audio)try{this.audio.stop()}catch(e){console.log("\u6682\u505c\u97f3\u4e50\u51fa\u9519\u4e86")}}setMarker(e){return(0,N.mG)(this,void 0,void 0,function*(){this.clearMarker(),this.isYellow=!1,this.isRed=!1,this.isOrange=!1;let a="assets/marker.jpg";switch(e){case"FIRE_WARN":a="assets/yellow.png",this.isYellow=!0;break;case"FIRE_ALARM":a="assets/red.png",this.isRed=!0;break;case"DEVICE_FAULT":a="assets/orange.png",this.isOrange=!0}this.marker=new AMap.Marker({position:this.locationCache,content:`<div class='img-box'>\n      <img src='${a}' id='animat' style='width:60px;position:relative;animation:mymove 5s infinite;-webkit-animation:mymove 5s infinite; animation-direction:alternate;animation-timing-function: ease-in-out;-webkit-animation:mymove 5s infinite;-webkit-animation-direction:alternate;-webkit-animation-timing-function: ease-in-out;'/> </div>`,offset:new AMap.Pixel(-12,-12)});let l=(yield this.apiService.orgContactInfo({orgId:this.orgId})).data;this.person1=l[0],this.person2=l[1];let r=yield this.apiService.findOrgById(this.orgId);this.orgInfo=r.data;let p=new AMap.InfoWindow({offset:new AMap.Pixel(15,-10)});this.marker.on("mouseover",c=>{let g=`<div class="rescuer" style="width:360px">\n            <div class='title'>\n              <img width="35px"  src='${a}'/>\n              <span style="font-size:18px;font-weight: bold">\n              ${this.orgInfo.orgName}\n                <span style="font-size:12px;font-weight:100">(\u8054\u7f51\u5355\u4f4d)</span>\n              </span>\n            <div>\n            <div style="padding:0px 0px 0px 35px;">\n              <p class='input-item' style="margin:5px;font-weight: bold">${this.messageText}\u5185\u5bb9: \u8bbe\u5907${this.dataSet[0]?this.dataSet[0].type:"-"} \u4e0a\u62a5:${this.dataSet[0].name} </p>\n              <p class='input-item' style="margin:5px">\u4e0a\u62a5\u65f6\u95f4: ${this.dateFormat("mm-dd HH:MM:SS",this.dataSet[0]?this.dataSet[0].lastReportTime:"")} \u4f4d\u7f6e: <span style="display: inline-block;\n              width: 100px;\n              overflow: hidden;\n              white-space: nowrap;\n              text-overflow: ellipsis;">${this.dataSet[0]?this.dataSet[0].place:"-"}</span></p>\n              <p class='input-item' style="margin:5px">\u7d27\u6025\u8054\u7cfb\u4eba: ${this.person1.name+this.person1.phone}</p>\n              <p class='input-item' style="margin:5px">\u516c\u53f8\u7535\u8bdd: ${this.orgInfo.tel}</p>\n              <p class='input-item' style="margin:5px">\u5730 \u5740  :${this.orgInfo.address}</p>\n            </div>\n        </div>`;p.setContent(g),p.open(this.map,this.marker.getPosition())});let d=`<div class="rescuer" style="width:360px">\n            <div class='title'>\n              <img width="35px"  src='${a}'/>\n              <span style="font-size:18px;font-weight: bold">\n              ${this.orgInfo.orgName}\n                <span style="font-size:12px;font-weight:100">(\u8054\u7f51\u5355\u4f4d)</span>\n              </span>\n            <div>\n            <div style="padding:0px 0px 0px 35px;">\n            <p class='input-item' style="margin:5px;font-weight: bold">${this.messageText}\u5185\u5bb9: \u8bbe\u5907-${this.dataSet[0]?this.dataSet[0].type:"-"} \u539f\u56e0:${this.dataSet[0]?this.dataSet[0].name:"-"}</p>\n            <p class='input-item' style="margin:5px">\u4e0a\u62a5\u65f6\u95f4:${this.dateFormat("mm-dd HH:MM:SS",this.dataSet[0]?this.dataSet[0].lastReportTime:"")} \u4f4d\u7f6e: <span style="display: inline-block;\n            width: 100px;\n            overflow: hidden;\n            white-space: nowrap;\n            position: relative;\n            top: 5px;\n            text-overflow: ellipsis;">${this.dataSet[0]?this.dataSet[0].place:"-"}</span></p>\n              <p class='input-item' style="margin:5px">\u7d27\u6025\u8054\u7cfb\u4eba: ${this.person1.name+this.person1.phone}</p>\n              <p class='input-item' style="margin:5px">\u516c\u53f8\u7535\u8bdd: ${this.orgInfo.tel}</p>\n              <p class='input-item' style="margin:5px">\u5730 \u5740  :${this.orgInfo.address}</p>\n            </div>\n        </div>`;p.setContent(d),p.open(this.map,this.marker.getPosition()),this.map.add(this.marker)})}yinshiyunGetToken(){this.apiService.yinshiyunGetToken().then(e=>{e&&e.data&&(this.token=e.data,this.playr||this.createPlayer())})}getOrgRiskSource(){this.apiService.getRiskSourceAll().then(e=>{e&&e.data&&(e.data.forEach(a=>{this.riskSourceMap[a.id]=a.name}),this.apiService.getOrgRiskSource(this.orgId).then(a=>{a&&a.data&&(a.data.forEach((n,s)=>{n.index=s,n.nameText=this.riskSourceMap[n.riskSourceId]}),this.dataSet5=a.data)}))})}dateFormat(e,a){if(a){let s,n=new Date(a);const l={"Y+":n.getFullYear().toString(),"m+":(n.getMonth()+1).toString(),"d+":n.getDate().toString(),"H+":n.getHours().toString(),"M+":n.getMinutes().toString(),"S+":n.getSeconds().toString()};for(let r in l)s=new RegExp("("+r+")").exec(e),s&&(e=e.replace(s[1],1==s[1].length?l[r]:l[r].padStart(s[1].length,"0")));return e}return"-"}orgAttributeFindAll(){this.apiService.orgAttributeFindAll().then(e=>{e&&e.data&&(this.industryCategoryMap=this.enumService.getMap(e.data))})}charactarSearch(){this.apiService.charactarSearch().then(e=>{e&&e.data&&(this.charactarMap=this.enumService.getMap(e.data))})}datevRoomsNum(){this.apiService.datevRoomsNum().then(e=>{console.log(e),e&&e.data?(this.roomsNumber=e.data[0].count,e.data[1].count>0?(this.isUp=!0,this.lastMonthNum=e.data[1].count/10):(this.isUp=!1,this.lastMonthNum=Math.abs(Number(e.data[1].count))/10)):(this.roomsNumber=0,this.lastMonthNum=0)})}getResucerCharts(e){this.apiService.getResucerCharts(e).then(a=>{console.log(a);let r,n={},s=document.getElementById("rescuerCharts"),l=_.S1(s),p=[],d=[],c=[],g=[],y=[],v=[];if(a&&a.data&&0!=a.data.length){a.data.forEach((m,x)=>{!(x>5)&&x<=a.data.length&&(v.push(m.name),a.data.length&&(p.push(m.list[0].count),d.push(m.list[1]?m.list[1].count:0),c.push(m.list[2]?m.list[2].count:0),g.push(m.list[3]?m.list[3].count:0),y.push(m.list[4]?m.list[4].count:0)))}),n.configParameters={rotate:{min:-90,max:90},align:{options:{left:"left",center:"center",right:"right"}},verticalAlign:{options:{top:"top",middle:"middle",bottom:"bottom"}},position:{options:["left","right","top","bottom","inside","insideTop","insideLeft","insideRight","insideBottom","insideTopLeft","insideTopRight","insideBottomLeft","insideBottomRight"].reduce(function(m,x){return m[x]=x,m},{})},distance:{min:0,max:100}},n.config={rotate:90,align:"left",verticalAlign:"middle",position:"insideBottom",distance:15,onChange:function(){const m={rotate:n.config.rotate,align:n.config.align,verticalAlign:n.config.verticalAlign,position:n.config.position,distance:n.config.distance};l.setOption({series:[{label:m},{label:m},{label:m},{label:m}]})}};const u={show:!1,position:n.config.position,distance:n.config.distance,align:n.config.align,verticalAlign:n.config.verticalAlign,rotate:n.config.rotate,fontSize:12,rich:{name:{}}};r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["\u793e\u533a\u5fae\u578b\u6d88\u9632\u7ad9","\u5355\u4f4d\u5fae\u578b\u6d88\u9632\u7ad9","\u4e13\u4e1a\u6d88\u9632\u6551\u63f4\u961f","\u6d3e\u51fa\u6240","\u5176\u4ed6\u6551\u63f4\u529b\u91cf"]},xAxis:[{type:"category",axisTick:{show:!1},data:v}],yAxis:[{type:"value"}],series:[{name:"\u793e\u533a\u5fae\u578b\u6d88\u9632\u7ad9",type:"bar",barGap:0,label:u,emphasis:{focus:"series"},data:y},{name:"\u5355\u4f4d\u5fae\u578b\u6d88\u9632\u7ad9",type:"bar",label:u,emphasis:{focus:"series"},data:c},{name:"\u4e13\u4e1a\u6d88\u9632\u6551\u63f4\u961f",type:"bar",label:u,emphasis:{focus:"series"},data:p},{name:"\u6d3e\u51fa\u6240",type:"bar",label:u,emphasis:{focus:"series"},data:g},{name:"\u5176\u4ed6\u6551\u63f4\u529b\u91cf",type:"bar",label:u,emphasis:{focus:"series"},data:d}]},r&&l.setOption(r)}})}datevEventGroupByHour(e){this.apiService.datevEventGroupByHour({operateId:e}).then(a=>{if(a&&a.data){console.log(a);var l,n=document.getElementById("timeDistribution"),s=_.S1(n);let r=[],p=[],d=[];a.data.forEach((c,g)=>{r.push(c.list[0].count),p.push(c.list[1].count),d.push(c.list[2].count)}),(l={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["00:00-04:00","05:00-08:00","08:00-11:00","11:00-13:00","13:00-16:00","16:00-19:00","19:00-23:59"]},series:[{itemStyle:{color:"#FFC409"},name:"\u9884\u8b66(\u6761)",type:"bar",stack:"total",label:{},emphasis:{focus:"series"},data:r},{itemStyle:{color:"#EB445A"},name:"\u544a\u8b66(\u6761)",type:"bar",stack:"total",label:{},emphasis:{focus:"series"},data:p},{itemStyle:{color:"rgb(177, 2, 2)"},name:"\u6210\u707e(\u6761)",type:"bar",stack:"total",label:{},emphasis:{focus:"series"},data:d}]})&&s.setOption(l)}})}datevEventGroupByIndustryCategory(){this.apiService.datevEventGroupByIndustryCategory().then(e=>{if(console.log("datevEventGroupByIndustryCategory"),console.log(e),e&&e.data){let a=[],n=[],s=[];e.data[0].list.forEach(c=>{s.push({name:c.name,max:500}),a.push(c.count)}),e.data[1].list.forEach(c=>{n.push(c.count)});let d,r=document.getElementById("formatDistribution"),p=_.S1(r);d={title:{text:""},tooltip:{trigger:"item"},legend:{data:[""]},radar:{shape:"circle",indicator:s,axisLine:{lineStyle:{color:"rgba(0,0,0 )"}}},series:[{type:"radar",name:"\u9884\u8b66,\u544a\u8b66",data:[{value:n,name:"\u9884\u8b66(\u6761)",itemStyle:{color:"#FFC409"}},{value:a,name:"\u544a\u8b66(\u6761)",itemStyle:{color:"#EB445A"}}]}]},d&&p.setOption(d)}})}datevEventCurveForHome(e){this.apiService.datevEventCurveForHome({operateId:e}).then(a=>{})}datevEventCheckResult(){this.apiService.datevEventCheckResult().then(e=>{e&&e.data?(this.successCheck=e.data[0].count,e.data[1]&&e.data[1].count>0?(this.isCheckUp=!0,this.successCheckLastMonth=e.data[1].count/10):(this.isCheckUp=!1,this.successCheckLastMonth=Math.abs(Number(e.data[1].count))/10)):(this.successCheckLastMonth=0,this.successCheck=0)})}datevAlarmAndWarnNum(e){this.apiService.datevAlarmAndWarnNum({operateId:e}).then(a=>{a&&a.data?(this.alarmAndWarnNum=a.data[0].count,a.data[1].count>0?(this.isAlarmUp=!0,this.alarmAndWarnLastNum=a.data[1].count/10):(this.isAlarmUp=!1,this.alarmAndWarnLastNum=Math.abs(Number(a.data[1].count))/10)):(this.alarmAndWarnNum=0,this.alarmAndWarnLastNum=0)})}datevDeviceNum(){this.apiService.datevDeviceNum().then(e=>{e&&e.data?(this.deviceNum=e.data[0].count,e.data[1].count>0?(this.isDeviceUp=!0,this.deviceNum=e.data[1].count/10):(this.isDeviceUp=!1,this.devicelastMonthNum=Math.abs(Number(e.data[1].count))/10)):(this.deviceNum=0,this.devicelastMonthNum=0)})}webEventCurveForHome(){const e=new Date;e.setHours(0,0,0,0);const a=new Date(e.getTime()-2592e6);this.apiService.webEventCurveForHome({firstReportTimeStart:a.getTime(),firstReportTimeEnd:e.getTime()+864e5}).then(n=>{if(console.log(n),n&&n.data&&2==n.data.length){let p=[],d=[],c=[];n.data[0].list.forEach(g=>{p.push(g.count),c.push(g.name)}),n.data[1].list.forEach(g=>{d.push(g.count)});var r,s=document.getElementById("offlineChartData"),l=_.S1(s);(r={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["\u9884\u8b66","\u544a\u8b66"]},toolbox:{show:!1,feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:c}],yAxis:[{name:"\u6761",type:"value"}],series:[{smooth:!0,name:"\u9884\u8b66",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:p,itemStyle:{color:"#FFC409"}},{smooth:!0,name:"\u544a\u8b66",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:d,itemStyle:{color:"#EB445A"}}]})&&l.setOption(r)}})}rescuePointGetList(){let e=this.global.getUserInfo().operateId?this.global.getUserInfo().operateId:4;this.apiService.rescuePointGetList({operateId:e}).then(a=>{a&&a.data&&a.data.content.forEach(n=>{n.SSQ=this.enumService.getSSQ(n.provinceId,n.cityId,n.districtId),this.setRescuerPoint(n)})})}setRescuerPoint(e){let a="assets/maker1.png";switch(e.type){case"\u793e\u533a\u5fae\u578b\u6d88\u9632\u7ad9":a="assets/maker3.png";break;case"\u5355\u4f4d\u5fae\u578b\u6d88\u9632\u7ad9":a="assets/maker5.png";break;case"\u4e13\u4e1a\u6d88\u9632\u6551\u63f4\u961f":a="assets/maker1.png";break;case"\u6d3e\u51fa\u6240":a="assets/maker2.png";break;case"\u5176\u4ed6\u6551\u63f4\u529b\u91cf":a="assets/maker4.png"}let s=new AMap.Marker({position:[e.longitude,e.latitude],content:`<div class='img-box'>\n        <img src='${a}' id='animat' style='width:40px;position:relative;'/>\n      </div>`,offset:new AMap.Pixel(-20,-20)}),l=new AMap.InfoWindow({offset:new AMap.Pixel(0,-20)});s.on("mouseover",r=>{l.setContent(`<div class="rescuer" style="width:360px">\n            <div class='title'>\n              <img width="35px"  src='${a}'/>\n              <span style="font-size:18px;font-weight: bold">\n              ${e.name}\n                <span style="font-size:12px;font-weight:100">(${e.type})</span>\n              </span>\n            <div>\n            <div style="padding:0px 0px 0px 35px;">\n              <p class='input-item' style="margin:5px">\u8054\u7cfb\u4eba: ${e.contactName}</p>\n              <p class='input-item' style="margin:5px">\u624b\u673a\u53f7: ${e.phone}</p>\n              <p class='input-item' style="margin:5px">\u7535 \u8bdd  : ${e.tel}</p>\n              <p class='input-item' style="margin:5px">\u5730 \u5740  :${e.SSQ+e.address}</p>\n            </div>\n        </div>`),l.open(this.map,s.getPosition())}),this.map.add(s)}getWeather(){AMap.plugin("AMap.Weather",()=>{(new AMap.Weather).getForecast("330100",(a,n)=>{console.log(n.forecasts[0]),this.weather=n&&n.forecasts[0]?n.forecasts[0]:null})})}ngOnInit(){this.user=this.global.getUserInfo();let e=this.global.getUserInfo().operateId?this.global.getUserInfo().operateId:4;this.getWeather(),this.webEventCurveForHome(),this.datevRoomsNum(),this.datevDeviceNum(),this.datevEventCheckResult(),this.datevAlarmAndWarnNum(e),this.datevEventCurveForHome(e),this.datevEventGroupByIndustryCategory(),this.datevEventGroupByHour(e),this.getOperationList(),this.yinshiyunGetToken(),this.charactarSearch(),this.businessMap=this.enumService.businessMap,this.materialMap=this.enumService.materialMap,this.interval=setInterval(()=>{this.time=Date.now()},1e3),this.userTypeMap=this.enumService.userTypeMap,this.messageStatusMap=this.enumService.messageStatausMap,this.search({page:this.pageIndex-1,size:7,closed:!1})}searchLevel(){this.apiService.searchLevel().then(e=>{e&&e.data&&(this.levelMap=this.enumService.getMap(e.data))})}getOperationList(){this.apiService.getOperationList().then(e=>{e&&e.data&&(this.operationMap=this.enumService.getMap(e.data))})}orgBuildTypeFindAll(){this.apiService.orgBuildTypeFindAll().then(e=>{e&&e.data&&(console.log(e),this.buildAttributeMap=this.enumService.getMap(e.data))})}search(e){e=this.apiService.filterData(e),Promise.all([this.apiService.searchFireAlarm(e),this.apiService.searchFireWarn(e),this.apiService.searchDeviceFault(e)]).then(a=>{if(a[0]&&a[1]&&a[2]&&a[0].data&&a[1].data&&a[2].data)if(a[0].data.content&&0===a[0].data.content.length&&a[1].data.content&&0===a[1].data.content.length&&a[2].data.content&&0===a[2].data.content.length)this.stopSong();else{let l=a[0].data.content.concat(a[1].data.content).concat(a[2].data.content).sort((r,p)=>p.lastReportTime-r.lastReportTime).filter(r=>r.accusativeType==this.message.accusativeType);this.message=l[0],this.message.accusativeType||(this.message.accusativeType="DEVICE_FAULT"),this.messageText=this.messageTypeMap[this.message.accusativeType],l.forEach((r,p)=>{r.index=p,r.messageType=this.messageTypeMap[r.accusativeType]?this.messageTypeMap[r.accusativeType]:"",r.checkResultText=this.checkResultMap[r.checkResult],r.parameter="\u67e5\u770b\u6570\u636e",r.abbreviation=this.enumService.getSerialNumAbbreviation(r.serialNum),"SYSTEM"==r.subjectType&&(r.subjectName="\u7cfb\u7edf",r.checkRemark=r.content),r.place||(r.place="\u65e0")}),this.dataSet=l.slice(0,6),this.playSong(this.message.accusativeType),this.setMarker(this.message.accusativeType)}}).finally(()=>{this.timeout=setTimeout(()=>{this.search(e)},3e3)})}getOrgInfo(){this.apiService.findOrgById(this.orgId).then(e=>{if(e&&e.data){this.orgInfo=e.data,this.orgInfo.SSQ=this.orgInfo.provinceId?this.enumService.getSSQ(this.orgInfo.provinceId,this.orgInfo.cityId,this.orgInfo.districtId):"-";let a=(new Date).getTime();this.orgInfo.serveEndTime&&a<this.orgInfo.serveEndTime?this.orgInfo.contractStatus="\u6709\u6548":this.orgInfo.serveEndTime&&a>this.orgInfo.serveEndTime?this.orgInfo.contractStatus="\u8fc7\u671f":this.orgInfo.serveStartTime&&a>this.orgInfo.serveStartTime&&(this.orgInfo.contractStatus="\u672a\u5f00\u59cb\u670d\u52a1"),this.orgInfo.businessStatus=this.businessMap[this.orgInfo.businessStatus],this.orgInfo.images=this.orgInfo.images?JSON.parse(this.orgInfo.images):[],this.orgInfo.logo=this.orgInfo.logo?JSON.parse(this.orgInfo.logo):[],this.orgInfo.certImage=this.orgInfo.certImage?JSON.parse(this.orgInfo.certImage):[],this.orgContactInfo()}})}orgContactInfo(){this.apiService.orgContactInfo({orgId:this.orgId}).then(e=>{e&&e.data&&(e.data.forEach((a,n)=>{a.index=n,a.levelText=this.levelMap[a.level],a.charactarText=this.charactarMap[a.charactarId]}),this.dataSet7=e.data,this.person1=this.dataSet7[0],this.person2=this.dataSet7[1],this.person3=this.dataSet7[2])})}orgBuildInfo(){this.apiService.orgBuildInfo(this.orgId).then(e=>{if(e&&e.data){let a=0;e.data.forEach((n,s)=>{n.index=s,n.buildAttributeText=this.buildAttributeMap[n.buildAttribute],n.materialText=this.materialMap[n.material],a+=n.roomsNumber}),this.rooms=a,this.dataSet2=e.data,this.buildNumber=e.data?e.data.length:0}})}back(){history.back()}editFun(e){}turnPageHistory(e){this.pageIndexHistory=e}mouseEnter(e){}mouseLeave(e){}Cancel(){this.isVisible=!1}showVideo(){this.boxShow="block"}closeVideo(){this.boxShow="none"}createPlayer(){this.playr=new EZUIKit.EZUIKitPlayer({id:"video-container",accessToken:this.token,url:"ezopen://open.ys7.com/C50669725/1.hd.live",template:"simple",autoplay:!0,header:["capturePicture","save","zoom"],footer:["talk","broadcast","hd","fullScreen"],audio:0,openSoundCallBack:e=>console.log("\u5f00\u542f\u58f0\u97f3\u56de\u8c03",e),closeSoundCallBack:e=>console.log("\u5173\u95ed\u58f0\u97f3\u56de\u8c03",e),startSaveCallBack:e=>console.log("\u5f00\u59cb\u5f55\u50cf\u56de\u8c03",e),stopSaveCallBack:e=>console.log("\u5f55\u50cf\u56de\u8c03",e),capturePictureCallBack:e=>console.log("\u622a\u56fe\u6210\u529f\u56de\u8c03",e),fullScreenCallBack:e=>console.log("\u5168\u5c4f\u56de\u8c03",e),fullScreenChangeCallBack:e=>console.log("\u5168\u5c4f\u53d8\u5316\u56de\u8c03",e),getOSDTimeCallBack:e=>console.log("\u83b7\u53d6OSDTime\u56de\u8c03",e),handleSuccess:e=>{console.log("\u64ad\u653e\u6210\u529f\u56de\u8c03",e)},handleError:e=>console.log("\u64ad\u653e\u5931\u8d25\u56de\u8c031",e),handleTalkSuccess:()=>console.log("\u5bf9\u8bb2\u6210\u529f\u56de\u6389"),handleTalkError:e=>{console.log("\u5bf9\u8bb2\u5931\u8d25",e)},decoderVersion:"v3.4",width:800,height:600})}Ok(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(V.s),t.Y36(W.t),t.Y36(j.n),t.Y36(t.sBO),t.Y36(G.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-real-time-map-map"]],decls:131,vars:67,consts:[[2,"margin","0","height","70px","font-weight","100"],[1,"logo",2,"position","relative","top","0px"],["src","./assets/tmp/img/avatar.jpg","width","45px;"],[2,"display","inline-block","padding-left","20px"],[2,"height","70px","font-size","22px","font-weight","bold","line-height","70px"],[2,"float","right","font-size","14px","display","inline-block","margin-right","20px","margin-top","30px"],["style","float: right;font-size: 14px;display: inline-block; margin-right: 20px;margin-top: 30px; font-weight:500;",4,"ngIf"],["style","float: right;font-size: 14px;display: inline-block; margin-right: 20px;margin-top: 30px;",4,"ngIf"],["style","color: #1890ff;float: right;font-size: 14px;display: inline-block; margin-right: 20px;margin-top: 30px;font-weight: 400;",4,"ngIf"],[1,"map-box"],[1,"box",2,"display","flex"],[2,"flex","5"],[1,"map-box-left"],[1,"map-container",3,"ngStyle","id"],[1,"list-box",3,"ngStyle"],[2,"background","#fff"],[1,"anticon","anticon-alert","icon-p"],["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","1em","height","1em","data-icon","alert","aria-hidden","true"],["d","M193 796c0 17.7 14.3 32 32 32h574c17.7 0 32-14.3 32-32V563c0-176.2-142.8-319-319-319S193 386.8 193 563v233zm72-233c0-136.4 110.6-247 247-247s247 110.6 247 247v193H404V585c0-5.5-4.5-10-10-10h-44c-5.5 0-10 4.5-10 10v171h-75V563zm-48.1-252.5l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3l-67.9-67.9a8.03 8.03 0 00-11.3 0l-39.6 39.6a8.03 8.03 0 000 11.3l67.9 67.9c3.1 3.1 8.1 3.1 11.3 0zm669.6-79.2l-39.6-39.6a8.03 8.03 0 00-11.3 0l-67.9 67.9a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l67.9-67.9c3.1-3.2 3.1-8.2 0-11.3zM832 892H192c-17.7 0-32 14.3-32 32v24c0 4.4 3.6 8 8 8h688c4.4 0 8-3.6 8-8v-24c0-17.7-14.3-32-32-32zM484 180h56c4.4 0 8-3.6 8-8V76c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v96c0 4.4 3.6 8 8 8z"],[2,"padding-left","10px"],[1,"firstCls",2,"background","#fff"],["class","table-body",3,"ngClass",4,"ngFor","ngForOf"],["style","text-align: center; padding:20px 0; color: #313131;",4,"ngIf"],["style","text-align: center;  color: #313131;padding-top:70px;",4,"ngIf"],["src","./assets/alarm.mp3","id","alarm","controls","controls","loop","false","hidden","false"],[1,"list-box",2,"padding-bottom","5px",3,"ngStyle"],[2,"font-size","16px"],[1,"anticon","anticon-insurance","icon-p"],["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","1em","height","1em","data-icon","insurance","aria-hidden","true"],["d","M441.6 306.8L403 288.6a6.1 6.1 0 00-8.4 3.7c-17.5 58.5-45.2 110.1-82.2 153.6a6.05 6.05 0 00-1.2 5.6l13.2 43.5c1.3 4.4 7 5.7 10.2 2.4 7.7-8.1 15.4-16.9 23.1-26V656c0 4.4 3.6 8 8 8H403c4.4 0 8-3.6 8-8V393.1a429.2 429.2 0 0033.6-79c1-2.9-.3-6-3-7.3zm26.8 9.2v127.2c0 4.4 3.6 8 8 8h65.9v18.6h-94.9c-4.4 0-8 3.6-8 8v35.6c0 4.4 3.6 8 8 8h55.1c-19.1 30.8-42.4 55.7-71 76a6 6 0 00-1.6 8.1l22.8 36.5c1.9 3.1 6.2 3.8 8.9 1.4 31.6-26.8 58.7-62.9 80.6-107.6v120c0 4.4 3.6 8 8 8h36.2c4.4 0 8-3.6 8-8V536c21.3 41.7 47.5 77.5 78.1 106.9 2.6 2.5 6.8 2.1 8.9-.7l26.3-35.3c2-2.7 1.4-6.5-1.2-8.4-30.5-22.6-54.2-47.8-72.3-76.9h59c4.4 0 8-3.6 8-8V478c0-4.4-3.6-8-8-8h-98.8v-18.6h66.7c4.4 0 8-3.6 8-8V316c0-4.4-3.6-8-8-8H476.4c-4.4 0-8 3.6-8 8zm51.5 42.8h97.9v41.6h-97.9v-41.6zm347-188.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6z"],[1,"header-box"],["nzSpan","6"],["class","upCls","style","font-size:14px",4,"ngIf"],["style","font-size:14px",4,"ngIf"],["style","color: ccc;font-size: 12px;","class","upCls",4,"ngIf"],["style","color: ccc;font-size: 12px;","class","downCls",4,"ngIf"],["style","color: ccc;font-size: 12px;",4,"ngIf"],[1,"right-title"],["id","offlineChartData",3,"ngStyle"],["nz-col","","nzSpan","10"],[1,"right-title",2,"margin","0"],["id","formatDistribution",3,"ngStyle"],["nz-col","","nzSpan","14"],["id","timeDistribution",3,"ngStyle"],[1,"right-title",2,"padding-top","15px","margin","0"],["id","rescuerCharts",3,"ngStyle"],["id","video-container-box",3,"ngStyle","click"],["id","video-container",2,"width","800px"],[2,"float","right","font-size","14px","display","inline-block","margin-right","20px","margin-top","30px","font-weight","500"],[2,"color","#1890ff","float","right","font-size","14px","display","inline-block","margin-right","20px","margin-top","30px","font-weight","400"],[1,"table-body",3,"ngClass"],[2,"width","100px"],["class","check",4,"ngIf"],["nz-tooltip","",1,"tooltip",3,"nzTooltipTitle"],["nz-button","",3,"click"],[1,"check"],[2,"text-align","center","padding","20px 0","color","#313131"],[2,"padding-top","10px"],[2,"text-align","center","color","#313131","padding-top","70px"],["src","./assets/noOrder.png","width","140px"],[1,"upCls",2,"font-size","14px"],["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","14px","height","14px","data-icon","arrow-up","aria-hidden","true",2,"color","red"],["d","M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"],[2,"font-size","14px"],["viewBox","64 64 896 896","focusable","false","fill","currentColor","width","14px","height","14px","data-icon","arrow-down","aria-hidden","true",2,"color","rgb(5, 199, 92)"],["d","M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"],[1,"upCls",2,"color","ccc","font-size","12px"],[1,"downCls",2,"color","ccc","font-size","12px"],[2,"color","ccc","font-size","12px"]],template:function(e,a){1&e&&(t.TgZ(0,"h3",0),t.TgZ(1,"span",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"span",5),t._uU(7),t.ALo(8,"date"),t.qZA(),t.YNc(9,at,2,4,"span",6),t.YNc(10,it,2,1,"span",7),t.YNc(11,nt,2,2,"span",8),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t._UZ(16,"div",13),t.qZA(),t.TgZ(17,"div",14),t.TgZ(18,"h5",15),t.TgZ(19,"i",16),t.O4$(),t.TgZ(20,"svg",17),t._UZ(21,"path",18),t.qZA(),t.qZA(),t._uU(22," \u5b9e\u65f6\u8b66\u60c5 "),t.kcU(),t.TgZ(23,"span"),t._uU(24),t.qZA(),t.qZA(),t.TgZ(25,"table",19),t.TgZ(26,"thead"),t.TgZ(27,"th"),t._uU(28,"\u8054\u7f51\u5355\u4f4d"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"\u8bbe\u5907\u540d\u79f0"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"\u5b89\u88c5\u4f4d\u7f6e"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"\u4e0a\u62a5\u65f6\u95f4"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"\u6d88\u606f\u7c7b\u578b"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"\u5904\u7406\u72b6\u6001"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"\u6d88\u9632\u89c6\u9891"),t.qZA(),t.qZA(),t.TgZ(41,"tbody",20),t.YNc(42,rt,21,17,"tr",21),t.qZA(),t.qZA(),t.YNc(43,ct,3,0,"h6",22),t.YNc(44,pt,2,0,"h6",23),t._UZ(45,"audio",24),t.qZA(),t.qZA(),t.TgZ(46,"div",11),t.TgZ(47,"div",25),t.TgZ(48,"h6",26),t.TgZ(49,"i",16),t.TgZ(50,"i",27),t.O4$(),t.TgZ(51,"svg",28),t._UZ(52,"path",29),t.qZA(),t.qZA(),t.qZA(),t._uU(53," \u8fd0\u8425\u6982\u51b5 "),t.qZA(),t.kcU(),t.TgZ(54,"nz-row",30),t.TgZ(55,"nz-col",31),t.TgZ(56,"p"),t._uU(57," \u4fdd\u62a4\u5efa\u7b51\u7269 "),t.qZA(),t.TgZ(58,"span"),t._uU(59),t.TgZ(60,"dd"),t._uU(61,"\u95f4"),t.qZA(),t.qZA(),t.TgZ(62,"p"),t.YNc(63,dt,3,0,"span",32),t.YNc(64,ht,3,0,"span",33),t.YNc(65,ut,2,1,"span",34),t.YNc(66,gt,2,1,"span",35),t.YNc(67,mt,2,0,"span",36),t.YNc(68,ft,2,0,"span",36),t.qZA(),t.qZA(),t.TgZ(69,"nz-col",31),t.TgZ(70,"p"),t._uU(71," \u63a2\u6d4b\u5668\u603b\u6570 "),t.qZA(),t.TgZ(72,"span"),t._uU(73),t.TgZ(74,"dd"),t._uU(75,"\u53ea"),t.qZA(),t.qZA(),t.TgZ(76,"p"),t.YNc(77,vt,3,0,"span",32),t.YNc(78,xt,3,0,"span",33),t.YNc(79,Tt,2,1,"span",34),t.YNc(80,yt,2,1,"span",35),t.YNc(81,Mt,2,0,"span",36),t.YNc(82,At,2,0,"span",36),t.qZA(),t.qZA(),t.TgZ(83,"nz-col",31),t.TgZ(84,"p"),t._uU(85," \u5f53\u6708\u9884\u8b66\u6761\u6570 "),t.qZA(),t.TgZ(86,"span"),t._uU(87),t.TgZ(88,"dd"),t._uU(89,"\u6761"),t.qZA(),t.qZA(),t.TgZ(90,"p"),t.YNc(91,Ct,3,0,"span",32),t.YNc(92,Zt,3,0,"span",33),t.YNc(93,_t,2,1,"span",34),t.YNc(94,St,2,1,"span",35),t.YNc(95,bt,2,0,"span",36),t.YNc(96,It,2,0,"span",36),t.qZA(),t.qZA(),t.TgZ(97,"nz-col",31),t.TgZ(98,"p"),t._uU(99," \u6210\u529f\u5904\u7f6e\u6b21\u6570 "),t.qZA(),t.TgZ(100,"span"),t._uU(101),t.TgZ(102,"dd"),t._uU(103,"\u6b21"),t.qZA(),t.qZA(),t.TgZ(104,"p"),t.YNc(105,wt,3,0,"span",32),t.YNc(106,kt,3,0,"span",33),t.YNc(107,Ot,2,1,"span",34),t.YNc(108,Et,2,1,"span",35),t.YNc(109,Ut,2,0,"span",36),t.YNc(110,Nt,2,0,"span",36),t.qZA(),t.qZA(),t.qZA(),t.TgZ(111,"p",37),t._uU(112," \u5b89\u5168\u6001\u52bf\u56fe "),t.qZA(),t.TgZ(113,"nz-row"),t._UZ(114,"div",38),t.qZA(),t.TgZ(115,"nz-row"),t.TgZ(116,"div",39),t.TgZ(117,"p",40),t._uU(118," \u706b\u60c5\u9ad8\u53d1\u4e1a\u6001 "),t.qZA(),t._UZ(119,"div",41),t.qZA(),t.TgZ(120,"div",42),t.TgZ(121,"p",40),t._uU(122," \u706b\u60c5\u65f6\u95f4\u6bb5\u5206\u5e03 "),t.qZA(),t._UZ(123,"div",43),t.qZA(),t.qZA(),t.TgZ(124,"nz-row"),t.TgZ(125,"p",44),t._uU(126," \u5e94\u6025\u6551\u63f4\u529b\u91cf\u5206\u5e03 "),t.qZA(),t._UZ(127,"div",45),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"div",46),t.NdJ("click",function(){return a.closeVideo()}),t.TgZ(129,"div"),t._UZ(130,"div",47),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.hij(" ",a.centerName," "),t.xp6(2),t.hij(" ",t.xi3(8,48,a.time,"yyyy-MM-dd hh:mm:ss")," "),t.xp6(2),t.Q6J("ngIf",a.weather),t.xp6(1),t.Q6J("ngIf",a.guardDays),t.xp6(1),t.Q6J("ngIf",a.user),t.xp6(5),t.Q6J("ngStyle",t.VKq(51,T,a.mapHeight))("id",a.containerId),t.xp6(1),t.Q6J("ngStyle",t.VKq(53,T,a.tebleHeight)),t.xp6(6),t.Tol(a.colorMap[a.message.accusativeType]),t.xp6(1),t.hij("-",a.messageText," "),t.xp6(18),t.Q6J("ngForOf",a.dataSet),t.xp6(1),t.Q6J("ngIf",a.dataSet&&0==a.dataSet.length),t.xp6(1),t.Q6J("ngIf",a.dataSet&&0==a.dataSet.length),t.xp6(3),t.Q6J("ngStyle",t.VKq(55,T,a.rightBoxHeight)),t.xp6(12),t.hij(" ",a.roomsNumber," "),t.xp6(4),t.Q6J("ngIf",a.isUp),t.xp6(1),t.Q6J("ngIf",!a.isUp),t.xp6(1),t.Q6J("ngIf",a.isUp),t.xp6(1),t.Q6J("ngIf",!a.isUp),t.xp6(1),t.Q6J("ngIf",a.isUp),t.xp6(1),t.Q6J("ngIf",!a.isUp),t.xp6(5),t.hij(" ",a.deviceNum," "),t.xp6(4),t.Q6J("ngIf",a.isDeviceUp),t.xp6(1),t.Q6J("ngIf",!a.isDeviceUp),t.xp6(1),t.Q6J("ngIf",a.isDeviceUp),t.xp6(1),t.Q6J("ngIf",!a.isDeviceUp),t.xp6(1),t.Q6J("ngIf",a.isDeviceUp),t.xp6(1),t.Q6J("ngIf",!a.isDeviceUp),t.xp6(5),t.hij(" ",a.alarmAndWarnNum," "),t.xp6(4),t.Q6J("ngIf",a.isAlarmUp),t.xp6(1),t.Q6J("ngIf",!a.isAlarmUp),t.xp6(1),t.Q6J("ngIf",a.isAlarmUp),t.xp6(1),t.Q6J("ngIf",!a.isAlarmUp),t.xp6(1),t.Q6J("ngIf",a.isAlarmUp),t.xp6(1),t.Q6J("ngIf",!a.isAlarmUp),t.xp6(5),t.hij(" ",a.successCheck," "),t.xp6(4),t.Q6J("ngIf",a.isCheckUp),t.xp6(1),t.Q6J("ngIf",!a.isCheckUp),t.xp6(1),t.Q6J("ngIf",a.isCheckUp),t.xp6(1),t.Q6J("ngIf",!a.isCheckUp),t.xp6(1),t.Q6J("ngIf",a.isCheckUp),t.xp6(1),t.Q6J("ngIf",!a.isCheckUp),t.xp6(4),t.Q6J("ngStyle",t.VKq(57,T,a.rightBoxItemHeight)),t.xp6(5),t.Q6J("ngStyle",t.VKq(59,T,a.rightBoxItemHeight)),t.xp6(4),t.Q6J("ngStyle",t.VKq(61,T,a.rightBoxItemHeight)),t.xp6(4),t.Q6J("ngStyle",t.VKq(63,T,a.rightBoxItemHeight)),t.xp6(1),t.Q6J("ngStyle",t.VKq(65,Pt,a.boxShow)))},directives:[M.O5,M.PC,A.Om,A.Uo,A._C,A.p0,M.sg,E.SK,E.t3,A.$Z,M.mk,K.SY,X.ix,tt.dQ,et.w],pipes:[M.uU],styles:[".map-container[_ngcontent-%COMP%]{width:100%;min-height:380px}h3[_ngcontent-%COMP%]{color:#000;width:100%;height:100px;padding:0 16px;background-color:#fff;margin:0;position:absolute;z-index:999999;left:0;top:0;right:0}h3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:56px;font-size:30px;font-weight:bold;margin:0!important;padding-top:10px}.header-box[_ngcontent-%COMP%]{text-align:center}.header-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.header-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:14px;font-weight:200}.header-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:28px;font-weight:bold;color:#333}.header-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{font-size:14px;display:inherit}.back[_ngcontent-%COMP%]{display:inline-block;float:right;margin-right:20px;cursor:pointer;position:absolute;top:50px;right:50px}.map-box[_ngcontent-%COMP%]{position:absolute;z-index:999;top:70px;right:0;left:0;bottom:0;background:#eee;overflow:hidden}.table-head[_ngcontent-%COMP%]{border:1px solid #eee;display:inline-flex}.table-head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:6px 4px;font-size:14px;flex:1}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f8f8;padding:10px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:5px 0;line-height:30px}h5[_ngcontent-%COMP%]{height:50px;font-size:18px;font-weight:200px;line-height:50px;padding-left:20px;border-bottom:1px solid #eee;margin:0}.map-box-left[_ngcontent-%COMP%]{padding:20px;background:#fff;margin:24px;box-shadow:0 0 8px #ccc}.list-box[_ngcontent-%COMP%]{padding:20px;background:#fff;margin:24px 24px 0;box-shadow:0 0 8px #ccc}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.check[_ngcontent-%COMP%]{display:none}.checkRemark[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:70px;display:block}.marker-img[_ngcontent-%COMP%]{width:60px!important}#animat[_ngcontent-%COMP%]{position:relative;animation:mymove 5s infinite;animation-direction:alternate;animation-timing-function:ease-in-out}@keyframes mymove{0%{transform:scale(1)}25%{transform:scale(1.3)}50%{transform:scale(1.6)}75%{transform:scale(1.8)}}.yellow[_ngcontent-%COMP%]{color:#d1d12c}.red[_ngcontent-%COMP%]{color:tomato}.orange[_ngcontent-%COMP%]{color:orange}#video-container-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;top:0;right:0;left:0;bottom:0;height:100%;background:rgba(0,0,0,.5);display:none}#video-container[_ngcontent-%COMP%]{position:absolute;left:50%;margin:100px auto auto -400px;top:50%}.icon-p[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:relative;top:-3px}.orgInfo-box[_ngcontent-%COMP%]{background:#fff;padding:20px 20px 20px 45px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px}#offlineChartData[_ngcontent-%COMP%]{width:100%;height:160px}.right-title[_ngcontent-%COMP%]{font-size:14px;font-weight:bold;padding-top:5px}#formatDistribution[_ngcontent-%COMP%]{width:270px;height:210px}#timeDistribution[_ngcontent-%COMP%]{height:220px;width:100%}#rescuerCharts[_ngcontent-%COMP%]{height:205px;width:100%}.custom-input-card[_ngcontent-%COMP%]{width:18rem}.custom-input-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-left:1rem}.content-window-card[_ngcontent-%COMP%]{position:relative;width:300px;padding:.75rem 0 0 1.25rem;box-shadow:none;bottom:0;left:0;background:#fff}.content-window-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:2rem}.rescuer[_ngcontent-%COMP%]{display:none}.header-box[_ngcontent-%COMP%]   .upCls[_ngcontent-%COMP%]{color:#b10202;font-size:14px}.header-box[_ngcontent-%COMP%]   .downCls[_ngcontent-%COMP%]{color:green;font-size:14px}.colorRed[_ngcontent-%COMP%]{background:rgb(250,180,180)}.colorOrange[_ngcontent-%COMP%]{background:rgb(243,219,174)}.colorYellow[_ngcontent-%COMP%]{background:rgb(247,247,175)}.tooltip[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100px;display:block}.marquee[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;width:30px;-webkit-marquee-direction:left;-webkit-marquee-speed:normal;-webkit-marquee-style:alternate;-webkit-marquee-repetition:1;float:right;font-size:14px;display:inline-block;margin-right:20px;margin-top:33px;font-weight:bold}.notable-container[_ngcontent-%COMP%]{width:130px;overflow:hidden;display:inline-block}.notable-container[_ngcontent-%COMP%]   .words[_ngcontent-%COMP%]{font-size:10pt;color:#1890ff;white-space:nowrap;animation:notableAnimation 10s linear infinite}@keyframes notableAnimation{0%{left:100%}to{transform:translate(-100%);left:0}}"]}),i})();const qt=[{path:"",component:S},{path:"map",component:S}];let Rt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[I.Bz.forChild(qt)],I.Bz]}),i})();var zt=f(3873),Ft=f(7586);let Dt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[U.m8,Rt,zt.T,Ft.x]]}),i})()}}]);