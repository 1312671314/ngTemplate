"use strict";(self.webpackChunkng_alain=self.webpackChunkng_alain||[]).push([[204],{9346:(J,b)=>{var Z=function(){function p(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return p.hashStr=function(t,o){return void 0===o&&(o=!1),this.onePassHasher.start().appendStr(t).end(o)},p.hashAsciiStr=function(t,o){return void 0===o&&(o=!1),this.onePassHasher.start().appendAsciiStr(t).end(o)},p._hex=function(t){var n,e,i,h,o=p.hexChars,r=p.hexOut;for(h=0;h<4;h+=1)for(e=8*h,n=t[h],i=0;i<8;i+=2)r[e+1+i]=o.charAt(15&n),r[e+0+i]=o.charAt(15&(n>>>=4)),n>>>=4;return r.join("")},p._md5cycle=function(t,o){var r=t[0],n=t[1],e=t[2],i=t[3];n=((n+=((e=((e+=((i=((i+=((r=((r+=(n&e|~n&i)+o[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&e)+o[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&n)+o[2]+606105819|0)<<17|e>>>15)+i|0)&i|~e&r)+o[3]-1044525330|0)<<22|n>>>10)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n&e|~n&i)+o[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&e)+o[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&n)+o[6]-1473231341|0)<<17|e>>>15)+i|0)&i|~e&r)+o[7]-45705983|0)<<22|n>>>10)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n&e|~n&i)+o[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&e)+o[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&n)+o[10]-42063|0)<<17|e>>>15)+i|0)&i|~e&r)+o[11]-1990404162|0)<<22|n>>>10)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n&e|~n&i)+o[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&e)+o[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&n)+o[14]-1502002290|0)<<17|e>>>15)+i|0)&i|~e&r)+o[15]+1236535329|0)<<22|n>>>10)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n&i|e&~i)+o[1]-165796510|0)<<5|r>>>27)+n|0)&e|n&~e)+o[6]-1069501632|0)<<9|i>>>23)+r|0)&n|r&~n)+o[11]+643717713|0)<<14|e>>>18)+i|0)&r|i&~r)+o[0]-373897302|0)<<20|n>>>12)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n&i|e&~i)+o[5]-701558691|0)<<5|r>>>27)+n|0)&e|n&~e)+o[10]+38016083|0)<<9|i>>>23)+r|0)&n|r&~n)+o[15]-660478335|0)<<14|e>>>18)+i|0)&r|i&~r)+o[4]-405537848|0)<<20|n>>>12)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n&i|e&~i)+o[9]+568446438|0)<<5|r>>>27)+n|0)&e|n&~e)+o[14]-1019803690|0)<<9|i>>>23)+r|0)&n|r&~n)+o[3]-187363961|0)<<14|e>>>18)+i|0)&r|i&~r)+o[8]+1163531501|0)<<20|n>>>12)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n&i|e&~i)+o[13]-1444681467|0)<<5|r>>>27)+n|0)&e|n&~e)+o[2]-51403784|0)<<9|i>>>23)+r|0)&n|r&~n)+o[7]+1735328473|0)<<14|e>>>18)+i|0)&r|i&~r)+o[12]-1926607734|0)<<20|n>>>12)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n^e^i)+o[5]-378558|0)<<4|r>>>28)+n|0)^n^e)+o[8]-2022574463|0)<<11|i>>>21)+r|0)^r^n)+o[11]+1839030562|0)<<16|e>>>16)+i|0)^i^r)+o[14]-35309556|0)<<23|n>>>9)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n^e^i)+o[1]-1530992060|0)<<4|r>>>28)+n|0)^n^e)+o[4]+1272893353|0)<<11|i>>>21)+r|0)^r^n)+o[7]-155497632|0)<<16|e>>>16)+i|0)^i^r)+o[10]-1094730640|0)<<23|n>>>9)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n^e^i)+o[13]+681279174|0)<<4|r>>>28)+n|0)^n^e)+o[0]-358537222|0)<<11|i>>>21)+r|0)^r^n)+o[3]-722521979|0)<<16|e>>>16)+i|0)^i^r)+o[6]+76029189|0)<<23|n>>>9)+e|0,n=((n+=((e=((e+=((i=((i+=((r=((r+=(n^e^i)+o[9]-640364487|0)<<4|r>>>28)+n|0)^n^e)+o[12]-421815835|0)<<11|i>>>21)+r|0)^r^n)+o[15]+530742520|0)<<16|e>>>16)+i|0)^i^r)+o[2]-995338651|0)<<23|n>>>9)+e|0,n=((n+=((i=((i+=(n^((r=((r+=(e^(n|~i))+o[0]-198630844|0)<<6|r>>>26)+n|0)|~e))+o[7]+1126891415|0)<<10|i>>>22)+r|0)^((e=((e+=(r^(i|~n))+o[14]-1416354905|0)<<15|e>>>17)+i|0)|~r))+o[5]-57434055|0)<<21|n>>>11)+e|0,n=((n+=((i=((i+=(n^((r=((r+=(e^(n|~i))+o[12]+1700485571|0)<<6|r>>>26)+n|0)|~e))+o[3]-1894986606|0)<<10|i>>>22)+r|0)^((e=((e+=(r^(i|~n))+o[10]-1051523|0)<<15|e>>>17)+i|0)|~r))+o[1]-2054922799|0)<<21|n>>>11)+e|0,n=((n+=((i=((i+=(n^((r=((r+=(e^(n|~i))+o[8]+1873313359|0)<<6|r>>>26)+n|0)|~e))+o[15]-30611744|0)<<10|i>>>22)+r|0)^((e=((e+=(r^(i|~n))+o[6]-1560198380|0)<<15|e>>>17)+i|0)|~r))+o[13]+1309151649|0)<<21|n>>>11)+e|0,n=((n+=((i=((i+=(n^((r=((r+=(e^(n|~i))+o[4]-145523070|0)<<6|r>>>26)+n|0)|~e))+o[11]-1120210379|0)<<10|i>>>22)+r|0)^((e=((e+=(r^(i|~n))+o[2]+718787259|0)<<15|e>>>17)+i|0)|~r))+o[9]-343485551|0)<<21|n>>>11)+e|0,t[0]=r+t[0]|0,t[1]=n+t[1]|0,t[2]=e+t[2]|0,t[3]=i+t[3]|0},p.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(p.stateIdentity),this},p.prototype.appendStr=function(t){var e,i,o=this._buffer8,r=this._buffer32,n=this._bufferLength;for(i=0;i<t.length;i+=1){if((e=t.charCodeAt(i))<128)o[n++]=e;else if(e<2048)o[n++]=192+(e>>>6),o[n++]=63&e|128;else if(e<55296||e>56319)o[n++]=224+(e>>>12),o[n++]=e>>>6&63|128,o[n++]=63&e|128;else{if((e=1024*(e-55296)+(t.charCodeAt(++i)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");o[n++]=240+(e>>>18),o[n++]=e>>>12&63|128,o[n++]=e>>>6&63|128,o[n++]=63&e|128}n>=64&&(this._dataLength+=64,p._md5cycle(this._state,r),n-=64,r[0]=r[16])}return this._bufferLength=n,this},p.prototype.appendAsciiStr=function(t){for(var e,o=this._buffer8,r=this._buffer32,n=this._bufferLength,i=0;;){for(e=Math.min(t.length-i,64-n);e--;)o[n++]=t.charCodeAt(i++);if(n<64)break;this._dataLength+=64,p._md5cycle(this._state,r),n=0}return this._bufferLength=n,this},p.prototype.appendByteArray=function(t){for(var e,o=this._buffer8,r=this._buffer32,n=this._bufferLength,i=0;;){for(e=Math.min(t.length-i,64-n);e--;)o[n++]=t[i++];if(n<64)break;this._dataLength+=64,p._md5cycle(this._state,r),n=0}return this._bufferLength=n,this},p.prototype.getState=function(){var t=this,o=t._state;return{buffer:String.fromCharCode.apply(null,t._buffer8),buflen:t._bufferLength,length:t._dataLength,state:[o[0],o[1],o[2],o[3]]}},p.prototype.setState=function(t){var e,o=t.buffer,r=t.state,n=this._state;for(this._dataLength=t.length,this._bufferLength=t.buflen,n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],e=0;e<o.length;e+=1)this._buffer8[e]=o.charCodeAt(e)},p.prototype.end=function(t){void 0===t&&(t=!1);var i,o=this._bufferLength,r=this._buffer8,n=this._buffer32,e=1+(o>>2);if(this._dataLength+=o,r[o]=128,r[o+1]=r[o+2]=r[o+3]=0,n.set(p.buffer32Identity.subarray(e),e),o>55&&(p._md5cycle(this._state,n),n.set(p.buffer32Identity)),(i=8*this._dataLength)<=4294967295)n[14]=i;else{var h=i.toString(16).match(/(.*?)(.{0,8})$/);if(null===h)return;var d=parseInt(h[2],16),f=parseInt(h[1],16)||0;n[14]=d,n[15]=f}return p._md5cycle(this._state,n),t?this._state:p._hex(this._state)},p.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),p.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),p.hexChars="0123456789abcdef",p.hexOut=[],p.onePassHasher=new p,p}();b.V=Z,"5d41402abc4b2a76b9719d911017c592"!==Z.hashStr("hello")&&console.error("Md5 self test failed.")},7204:(J,b,c)=>{c.r(b),c.d(b,{PassportModule:()=>ht});var Z=c(1547),p=c(2124),t=c(7716),o=c(3630),r=c(3423);let n=(()=>{class a{constructor(s,u,g){this.socialService=s,this.settingsSrv=u,this.route=g,this.type=""}ngOnInit(){this.type=this.route.snapshot.params.type,this.mockModel()}mockModel(){const s={token:"123456789",name:"cipchk",email:`${this.type}@${this.type}.com`,id:1e4,time:+new Date};this.settingsSrv.setUser(Object.assign(Object.assign({},this.settingsSrv.user),s)),this.socialService.callback(s)}}return a.\u0275fac=function(s){return new(s||a)(t.Y36(p.VK),t.Y36(o.gb),t.Y36(r.gz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-callback"]],features:[t._Bn([p.VK])],decls:0,vars:0,template:function(s,u){},encapsulation:2}),a})();var e=c(665),i=c(5329),h=c(5887),d=c(6704),f=c(4514),v=c(7674),x=c(4453),A=c(9374);let T=(()=>{class a{constructor(s,u,g,m){this.tokenService=u,this.settings=g,this.router=m,this.f=s.group({password:[null,e.kI.required]})}get user(){return this.settings.user}submit(){for(const s in this.f.controls)this.f.controls[s].markAsDirty(),this.f.controls[s].updateValueAndValidity();this.f.valid&&(console.log("Valid!"),console.log(this.f.value),this.tokenService.set({token:"123"}),this.router.navigate(["dashboard"]))}}return a.\u0275fac=function(s){return new(s||a)(t.Y36(e.qu),t.Y36(p.T),t.Y36(o.gb),t.Y36(r.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["passport-lock"]],decls:15,vars:11,consts:[[1,"ant-card","width-lg",2,"margin","0 auto"],[1,"ant-card-body"],[1,"avatar"],["nzIcon","user","nzSize","large",3,"nzSrc"],["nz-form","","role","form",1,"mt-md",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["nzSuffixIcon","lock"],["type","password","nz-input","","formControlName","password"],["nzType","flex","nzAlign","middle"],[2,"text-align","right",3,"nzOffset","nzSpan"],["nz-button","","nzType","primary",3,"disabled"]],template:function(s,u){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"nz-avatar",3),t.qZA(),t.TgZ(4,"form",4),t.NdJ("ngSubmit",function(){return u.submit()}),t.TgZ(5,"nz-form-item"),t.TgZ(6,"nz-form-control",5),t.ALo(7,"i18n"),t.TgZ(8,"nz-input-group",6),t._UZ(9,"input",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"nz-row",8),t.TgZ(11,"nz-col",9),t.TgZ(12,"button",10),t._uU(13),t.ALo(14,"i18n"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(3),t.Q6J("nzSrc",u.user.avatar),t.xp6(1),t.Q6J("formGroup",u.f),t.xp6(2),t.Q6J("nzErrorTip",t.lcZ(7,7,"validation.password.required")),t.xp6(5),t.Q6J("nzOffset",12)("nzSpan",12),t.xp6(1),t.Q6J("disabled",!u.f.valid),t.xp6(1),t.Oqu(t.lcZ(14,9,"app.lock")))},directives:[i.Dz,e._Y,e.JL,h.Lr,e.sg,d.SK,h.Nx,d.t3,h.Fd,f.w,v.gB,v.Zp,e.Fj,e.JJ,e.u,x.ix,A.dQ],pipes:[o.w5],styles:["[_nghost-%COMP%]     .ant-card-body{position:relative;margin-top:80px}[_nghost-%COMP%]     .avatar{position:absolute;top:-20px;left:50%;margin-left:-20px}"]}),a})();var O=c(7048),P=c(2340),F=c(9346),N=c(2679),Q=c(5830),M=c(7465),S=c(4828),_=c(8583),w=c(480);function Y(a,l){if(1&a&&t._UZ(0,"nz-alert",11),2&a){const s=t.oxw();t.Q6J("nzType","error")("nzMessage",s.error)("nzShowIcon",!0)}}let U=(()=>{class a{constructor(s,u,g,m,z,C,y,mt,dt,ft,vt){this.router=u,this.settingsService=g,this.socialService=m,this.reuseTabService=z,this.tokenService=C,this.startupSrv=y,this.http=mt,this.cdr=dt,this.apiService=ft,this.global=vt,this.error="",this.type=0,this.loading=!1,this.count=0,this.form=s.group({userName:[null,[e.kI.required]],password:[null,[e.kI.required]],mobile:[null,[e.kI.required,e.kI.pattern(/^1\d{10}$/)]],captcha:[null,[e.kI.required]],remember:[!0]})}get userName(){return this.form.controls.userName}get password(){return this.form.controls.password}get mobile(){return this.form.controls.mobile}get captcha(){return this.form.controls.captcha}switch({index:s}){this.type=s}getCaptcha(){if(this.mobile.invalid)return this.mobile.markAsDirty({onlySelf:!0}),void this.mobile.updateValueAndValidity({onlySelf:!0});this.count=59,this.interval$=setInterval(()=>{this.count-=1,this.count<=0&&clearInterval(this.interval$)},1e3)}submit(){if(this.error="",0===this.type){if(this.userName.markAsDirty(),this.userName.updateValueAndValidity(),this.password.markAsDirty(),this.password.updateValueAndValidity(),this.userName.invalid||this.password.invalid)return}else if(this.mobile.markAsDirty(),this.mobile.updateValueAndValidity(),this.captcha.markAsDirty(),this.captcha.updateValueAndValidity(),this.mobile.invalid||this.captcha.invalid)return;this.loading=!0,this.apiService.login({phone:this.userName.value,password:F.V.hashStr(this.password.value),channel:"web"}).then(s=>{if(s)if(console.log(s),s&&s.success)this.global.login(s.data),this.tokenService.set(s.data),this.startupSrv.load().subscribe(()=>this.router.navigateByUrl("/dashboard"));else{if("\u7b2c\u4e00\u6b21\u767b\u5f55,\u8bf7\u91cd\u7f6e\u5bc6\u7801"!=s.message)return this.loading=!1,void(this.error=s.message);this.error=s.message}})}open(s,u="href"){let g="",m="";switch(m=P.N.production?`https://ng-alain.github.io/ng-alain/#/passport/callback/${s}`:`http://localhost:4200/#/passport/callback/${s}`,s){case"auth0":g=`//cipchk.auth0.com/login?client=8gcNydIDzGBYxzqV0Vm1CX_RXH-wsWo5&redirect_uri=${decodeURIComponent(m)}`;break;case"github":g=`//github.com/login/oauth/authorize?client_id=9d6baae4b04a23fcafa2&response_type=code&redirect_uri=${decodeURIComponent(m)}`;break;case"weibo":g=`https://api.weibo.com/oauth2/authorize?client_id=1239507802&response_type=code&redirect_uri=${decodeURIComponent(m)}`}"window"===u?this.socialService.login(g,"/",{type:"window"}).subscribe(z=>{z&&(this.settingsService.setUser(z),this.router.navigateByUrl("/"))}):this.socialService.login(g,"/",{type:"href"})}ngOnDestroy(){this.interval$&&clearInterval(this.interval$)}}return a.\u0275fac=function(s){return new(s||a)(t.Y36(e.qu),t.Y36(r.F0),t.Y36(o.gb),t.Y36(p.VK),t.Y36(O.Wu,8),t.Y36(p.T),t.Y36(N.HS),t.Y36(o.lP),t.Y36(t.sBO),t.Y36(Q.s),t.Y36(M.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["passport-login"]],features:[t._Bn([p.VK])],decls:18,vars:10,consts:[["nz-form","","role","form",3,"formGroup","ngSubmit"],[1,"tabs",3,"nzAnimated","nzSelectChange"],[3,"nzTitle"],["class","mb-lg",3,"nzType","nzMessage","nzShowIcon",4,"ngIf"],["nzErrorTip","\u8bf7\u8f93\u5165\u624b\u673a\u53f7"],["nzSize","large","nzPrefixIcon","user"],["nz-input","","formControlName","userName","placeholder","\u8bf7\u8f93\u5165\u624b\u673a\u53f7"],["nzErrorTip","\u8bf7\u8f93\u5165\u5bc6\u7801"],["nzSize","large","nzPrefixIcon","lock"],["nz-input","","type","password","formControlName","password","placeholder","\u8bf7\u8f93\u5165\u5bc6\u7801"],["nz-button","","type","submit","nzType","primary","nzSize","large","nzBlock","",3,"nzLoading"],[1,"mb-lg",3,"nzType","nzMessage","nzShowIcon"]],template:function(s,u){1&s&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return u.submit()}),t.TgZ(1,"nz-tabset",1),t.NdJ("nzSelectChange",function(m){return u.switch(m)}),t.TgZ(2,"nz-tab",2),t.ALo(3,"i18n"),t.YNc(4,Y,1,3,"nz-alert",3),t.TgZ(5,"nz-form-item"),t.TgZ(6,"nz-form-control",4),t.TgZ(7,"nz-input-group",5),t._UZ(8,"input",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"nz-form-item"),t.TgZ(10,"nz-form-control",7),t.TgZ(11,"nz-input-group",8),t._UZ(12,"input",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"nz-form-item"),t.TgZ(14,"nz-form-item"),t.TgZ(15,"button",10),t._uU(16),t.ALo(17,"i18n"),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.Q6J("formGroup",u.form),t.xp6(1),t.Q6J("nzAnimated",!1),t.xp6(1),t.Q6J("nzTitle",t.lcZ(3,6,"app.login.tab-login-credentials")),t.xp6(2),t.Q6J("ngIf",u.error),t.xp6(11),t.Q6J("nzLoading",u.loading),t.xp6(1),t.hij(" ",t.lcZ(17,8,"app.login.login")," "))},directives:[e._Y,e.JL,h.Lr,e.sg,S.xH,S.xw,_.O5,d.SK,h.Nx,d.t3,h.Fd,f.w,v.gB,v.Zp,e.Fj,e.JJ,e.u,x.ix,A.dQ,w.r],pipes:[o.w5],styles:["[_nghost-%COMP%]{display:block;width:368px;margin:0 auto}[_nghost-%COMP%]     .ant-tabs .ant-tabs-bar{margin-bottom:24px;text-align:center;border-bottom:0}[_nghost-%COMP%]     .ant-tabs-tab{font-size:16px;line-height:24px}[_nghost-%COMP%]     .ant-input-affix-wrapper .ant-input:not(:first-child){padding-left:4px}[_nghost-%COMP%]     .icon{margin-left:16px;color:#0003;font-size:24px;vertical-align:middle;cursor:pointer;transition:color .3s}[_nghost-%COMP%]     .icon:hover{color:#1890ff}[_nghost-%COMP%]     .other{margin-top:24px;line-height:22px;text-align:left}[_nghost-%COMP%]     .other nz-tooltip{vertical-align:middle}[_nghost-%COMP%]     .other .register{float:right}[data-theme=dark]   [_nghost-%COMP%]     .icon{color:#fff3}[data-theme=dark]   [_nghost-%COMP%]     .icon:hover{color:#fff}"],changeDetection:0}),a})();var B=c(6260),R=c(8058),V=c(3797);function D(a,l){if(1&a&&(t.TgZ(0,"div",4),t._uU(1),t.ALo(2,"i18n"),t.qZA()),2&a){const s=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,"app.register-result.msg",s.params)," ")}}let L=(()=>{class a{constructor(s,u){this.msg=u,this.params={email:""},this.email="",this.params.email=this.email=s.snapshot.queryParams.email||"ng-alain@example.com"}}return a.\u0275fac=function(s){return new(s||a)(t.Y36(r.gz),t.Y36(R.dD))},a.\u0275cmp=t.Xpm({type:a,selectors:[["passport-register-result"]],decls:10,vars:11,consts:[["type","success",3,"title","description"],["title",""],["nz-button","","nzSize","large",3,"nzType","click"],["routerLink","/","nz-button","","nzSize","large"],[1,"title",2,"font-size","20px"]],template:function(s,u){if(1&s&&(t.TgZ(0,"result",0),t.ALo(1,"i18n"),t.YNc(2,D,3,4,"ng-template",null,1,t.W1O),t.TgZ(4,"button",2),t.NdJ("click",function(){return u.msg.success("email")}),t._uU(5),t.ALo(6,"i18n"),t.qZA(),t.TgZ(7,"button",3),t._uU(8),t.ALo(9,"i18n"),t.qZA(),t.qZA()),2&s){const g=t.MAs(3);t.s9C("description",t.lcZ(1,5,"app.register-result.activation-email")),t.Q6J("title",g),t.xp6(4),t.Q6J("nzType","primary"),t.xp6(1),t.hij(" ",t.lcZ(6,7,"app.register-result.view-mailbox")," "),t.xp6(3),t.hij(" ",t.lcZ(9,9,"app.register-result.back-home")," ")}},directives:[V.N,x.ix,A.dQ,f.w,r.rH],pipes:[o.w5],encapsulation:2}),a})();function E(a,l){return s=>{const u=s.get(a),g=s.get(l);return g.errors&&!g.errors.matchControl||g.setErrors(u.value!==g.value?{matchControl:!0}:null),null}}var $=c(8939),j=c(8381),k=c(2281),I=c(269);function W(a,l){if(1&a&&t._UZ(0,"nz-alert",23),2&a){const s=t.oxw();t.Q6J("nzType","error")("nzMessage",s.error)("nzShowIcon",!0)}}function G(a,l){1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.email.required")))}function H(a,l){1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.email.wrong-format")))}function K(a,l){if(1&a&&(t.YNc(0,G,3,3,"ng-container",24),t.YNc(1,H,3,3,"ng-container",24)),2&a){const s=l.$implicit;t.Q6J("ngIf",null==s.errors?null:s.errors.required),t.xp6(1),t.Q6J("ngIf",null==s.errors?null:s.errors.email)}}function X(a,l){1&a&&(t.TgZ(0,"div",32),t._uU(1),t.ALo(2,"i18n"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.password.strength.strong")))}function tt(a,l){1&a&&(t.TgZ(0,"div",33),t._uU(1),t.ALo(2,"i18n"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.password.strength.medium")))}function et(a,l){1&a&&(t.TgZ(0,"div",34),t._uU(1),t.ALo(2,"i18n"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.password.strength.short")))}function nt(a,l){if(1&a&&(t.TgZ(0,"div",25),t.ynx(1,26),t.YNc(2,X,3,3,"div",27),t.YNc(3,tt,3,3,"div",28),t.YNc(4,et,3,3,"div",29),t.BQk(),t.TgZ(5,"div"),t._UZ(6,"nz-progress",30),t.qZA(),t.TgZ(7,"p",31),t._uU(8),t.ALo(9,"i18n"),t.qZA(),t.qZA()),2&a){const s=t.oxw();t.xp6(1),t.Q6J("ngSwitch",s.status),t.xp6(1),t.Q6J("ngSwitchCase","ok"),t.xp6(1),t.Q6J("ngSwitchCase","pass"),t.xp6(2),t.Gre("progress-",s.status,""),t.xp6(1),t.Q6J("nzPercent",s.progress)("nzStatus",s.passwordProgressMap[s.status])("nzStrokeWidth",6)("nzShowInfo",!1),t.xp6(2),t.Oqu(t.lcZ(9,11,"validation.password.strength.msg"))}}function rt(a,l){1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.confirm-password.required")))}function it(a,l){1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.password.twice")))}function ot(a,l){if(1&a&&(t.YNc(0,rt,3,3,"ng-container",24),t.YNc(1,it,3,3,"ng-container",24)),2&a){const s=l.$implicit;t.Q6J("ngIf",null==s.errors?null:s.errors.required),t.xp6(1),t.Q6J("ngIf",null==s.errors?null:s.errors.matchControl)}}function st(a,l){1&a&&(t.TgZ(0,"nz-select",35),t._UZ(1,"nz-option",36),t._UZ(2,"nz-option",36),t.qZA()),2&a&&(t.xp6(1),t.Q6J("nzLabel","+86")("nzValue","+86"),t.xp6(1),t.Q6J("nzLabel","+87")("nzValue","+87"))}function at(a,l){1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.phone-number.required")))}function lt(a,l){1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"i18n"),t.BQk()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"validation.phone-number.wrong-format")))}function ut(a,l){if(1&a&&(t.YNc(0,at,3,3,"ng-container",24),t.YNc(1,lt,3,3,"ng-container",24)),2&a){const s=l.$implicit;t.Q6J("ngIf",null==s.errors?null:s.errors.required),t.xp6(1),t.Q6J("ngIf",null==s.errors?null:s.errors.pattern)}}const pt=function(){return{"width.px":240}};const ct=[{path:"",component:B.W,children:[{path:"",redirectTo:"login"},{path:"login",component:U,data:{title:"\u767b\u5f55",titleI18n:"app.login.login"}},{path:"register",component:(()=>{class a{constructor(s,u,g,m){this.router=u,this.http=g,this.cdr=m,this.error="",this.type=0,this.loading=!1,this.visible=!1,this.status="pool",this.progress=0,this.passwordProgressMap={ok:"success",pass:"normal",pool:"exception"},this.count=0,this.form=s.group({mail:[null,[e.kI.required,e.kI.email]],password:[null,[e.kI.required,e.kI.minLength(6),a.checkPassword.bind(this)]],confirm:[null,[e.kI.required,e.kI.minLength(6)]],mobilePrefix:["+86"],mobile:[null,[e.kI.required,e.kI.pattern(/^1\d{10}$/)]],captcha:[null,[e.kI.required]]},{validators:E("password","confirm")})}get mail(){return this.form.controls.mail}get password(){return this.form.controls.password}get confirm(){return this.form.controls.confirm}get mobile(){return this.form.controls.mobile}get captcha(){return this.form.controls.captcha}static checkPassword(s){if(!s)return null;const u=this;u.visible=!!s.value,u.status=s.value&&s.value.length>9?"ok":s.value&&s.value.length>5?"pass":"pool",u.visible&&(u.progress=10*s.value.length>100?100:10*s.value.length)}getCaptcha(){if(this.mobile.invalid)return this.mobile.markAsDirty({onlySelf:!0}),void this.mobile.updateValueAndValidity({onlySelf:!0});this.count=59,this.cdr.detectChanges(),this.interval$=setInterval(()=>{this.count-=1,this.cdr.detectChanges(),this.count<=0&&clearInterval(this.interval$)},1e3)}submit(){if(this.error="",Object.keys(this.form.controls).forEach(u=>{this.form.controls[u].markAsDirty(),this.form.controls[u].updateValueAndValidity()}),this.form.invalid)return;const s=this.form.value;this.loading=!0,this.cdr.detectChanges(),this.http.post("/register?_allow_anonymous=true",s).pipe((0,$.x)(()=>{this.loading=!1,this.cdr.detectChanges()})).subscribe(()=>{this.router.navigate(["passport","register-result"],{queryParams:{email:s.mail}})})}ngOnDestroy(){this.interval$&&clearInterval(this.interval$)}}return a.\u0275fac=function(s){return new(s||a)(t.Y36(e.qu),t.Y36(r.F0),t.Y36(o.lP),t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["passport-register"]],decls:50,vars:34,consts:[["nz-form","","role","form",3,"formGroup","ngSubmit"],["class","mb-lg",3,"nzType","nzMessage","nzShowIcon",4,"ngIf"],[3,"nzErrorTip"],["nzSize","large","nzAddonBeforeIcon","user"],["nz-input","","formControlName","mail","placeholder","Email"],["mailErrorTip",""],["nzSize","large","nzAddonBeforeIcon","lock","nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","focus","nzPopoverOverlayClassName","register-password-cdk",3,"nzPopoverVisible","nzPopoverOverlayStyle","nzPopoverContent","nzPopoverVisibleChange"],["nz-input","","type","password","formControlName","password","placeholder","Password"],["pwdCdkTpl",""],["nzSize","large","nzAddonBeforeIcon","lock"],["nz-input","","type","password","formControlName","confirm","placeholder","Confirm Password"],["confirmErrorTip",""],["nzSize","large",3,"nzAddOnBefore"],["addOnBeforeTemplate",""],["formControlName","mobile","nz-input","","placeholder","Phone number"],["mobileErrorTip",""],[3,"nzGutter"],[3,"nzSpan"],["nzSize","large","nzAddonBeforeIcon","mail"],["nz-input","","formControlName","captcha","placeholder","Captcha"],["type","button","nz-button","","nzSize","large","nzBlock","",3,"disabled","nzLoading","click"],["nz-button","","nzType","primary","nzSize","large","type","submit",1,"submit",3,"nzLoading"],["routerLink","/passport/login",1,"login"],[1,"mb-lg",3,"nzType","nzMessage","nzShowIcon"],[4,"ngIf"],[2,"padding","4px 0"],[3,"ngSwitch"],["class","success",4,"ngSwitchCase"],["class","warning",4,"ngSwitchCase"],["class","error",4,"ngSwitchDefault"],[3,"nzPercent","nzStatus","nzStrokeWidth","nzShowInfo"],[1,"mt-sm"],[1,"success"],[1,"warning"],[1,"error"],["formControlName","mobilePrefix",2,"width","100px"],[3,"nzLabel","nzValue"]],template:function(s,u){if(1&s&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"i18n"),t.qZA(),t.TgZ(3,"form",0),t.NdJ("ngSubmit",function(){return u.submit()}),t.YNc(4,W,1,3,"nz-alert",1),t.TgZ(5,"nz-form-item"),t.TgZ(6,"nz-form-control",2),t.TgZ(7,"nz-input-group",3),t._UZ(8,"input",4),t.qZA(),t.YNc(9,K,2,2,"ng-template",null,5,t.W1O),t.qZA(),t.qZA(),t.TgZ(11,"nz-form-item"),t.TgZ(12,"nz-form-control",2),t.ALo(13,"i18n"),t.TgZ(14,"nz-input-group",6),t.NdJ("nzPopoverVisibleChange",function(m){return u.visible=m}),t._UZ(15,"input",7),t.qZA(),t.YNc(16,nt,10,13,"ng-template",null,8,t.W1O),t.qZA(),t.qZA(),t.TgZ(18,"nz-form-item"),t.TgZ(19,"nz-form-control",2),t.TgZ(20,"nz-input-group",9),t._UZ(21,"input",10),t.qZA(),t.YNc(22,ot,2,2,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.TgZ(24,"nz-form-item"),t.TgZ(25,"nz-form-control",2),t.TgZ(26,"nz-input-group",12),t.YNc(27,st,3,4,"ng-template",null,13,t.W1O),t._UZ(29,"input",14),t.qZA(),t.YNc(30,ut,2,2,"ng-template",null,15,t.W1O),t.qZA(),t.qZA(),t.TgZ(32,"nz-form-item"),t.TgZ(33,"nz-form-control",2),t.ALo(34,"i18n"),t.TgZ(35,"nz-row",16),t.TgZ(36,"nz-col",17),t.TgZ(37,"nz-input-group",18),t._UZ(38,"input",19),t.qZA(),t.qZA(),t.TgZ(39,"nz-col",17),t.TgZ(40,"button",20),t.NdJ("click",function(){return u.getCaptcha()}),t._uU(41),t.ALo(42,"i18n"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"nz-form-item"),t.TgZ(44,"button",21),t._uU(45),t.ALo(46,"i18n"),t.qZA(),t.TgZ(47,"a",22),t._uU(48),t.ALo(49,"i18n"),t.qZA(),t.qZA(),t.qZA()),2&s){const g=t.MAs(10),m=t.MAs(17),z=t.MAs(23),C=t.MAs(28),y=t.MAs(31);t.xp6(1),t.Oqu(t.lcZ(2,21,"app.register.register")),t.xp6(2),t.Q6J("formGroup",u.form),t.xp6(1),t.Q6J("ngIf",u.error),t.xp6(2),t.Q6J("nzErrorTip",g),t.xp6(6),t.Q6J("nzErrorTip",t.lcZ(13,23,"validation.password.required")),t.xp6(2),t.Q6J("nzPopoverVisible",u.visible)("nzPopoverOverlayStyle",t.DdM(33,pt))("nzPopoverContent",m),t.xp6(5),t.Q6J("nzErrorTip",z),t.xp6(6),t.Q6J("nzErrorTip",y),t.xp6(1),t.Q6J("nzAddOnBefore",C),t.xp6(7),t.Q6J("nzErrorTip",t.lcZ(34,25,"validation.verification-code.required")),t.xp6(2),t.Q6J("nzGutter",8),t.xp6(1),t.Q6J("nzSpan",16),t.xp6(3),t.Q6J("nzSpan",8),t.xp6(1),t.Q6J("disabled",u.count>0)("nzLoading",u.loading),t.xp6(1),t.hij(" ",u.count?u.count+"s":t.lcZ(42,27,"app.register.get-verification-code")," "),t.xp6(3),t.Q6J("nzLoading",u.loading),t.xp6(1),t.hij(" ",t.lcZ(46,29,"app.register.register")," "),t.xp6(3),t.Oqu(t.lcZ(49,31,"app.register.sign-in"))}},directives:[e._Y,e.JL,h.Lr,e.sg,_.O5,d.SK,h.Nx,d.t3,h.Fd,f.w,v.gB,v.Zp,e.Fj,e.JJ,e.u,j.lU,x.ix,A.dQ,r.yS,w.r,_.RF,_.n9,_.ED,k.M,I.Vq,I.Ip],pipes:[o.w5],styles:["[_nghost-%COMP%]{display:block;width:368px;margin:0 auto}[_nghost-%COMP%]     h3{margin-bottom:20px;font-size:16px}[_nghost-%COMP%]     .submit{width:50%}[_nghost-%COMP%]     .login{float:right;line-height:40px}  .register-password-cdk .success,   .register-password-cdk .warning,   .register-password-cdk .error{transition:color .3s}  .register-password-cdk .success{color:#52c41a}  .register-password-cdk .warning{color:#faad14}  .register-password-cdk .error{color:#ff4d4f}  .register-password-cdk .progress-pass>.progress .ant-progress-bg{background-color:#faad14}"],changeDetection:0}),a})(),data:{title:"\u6ce8\u518c",titleI18n:"app.register.register"}},{path:"register-result",component:L,data:{title:"\u6ce8\u518c\u7ed3\u679c",titleI18n:"app.register.register"}},{path:"lock",component:T,data:{title:"\u9501\u5c4f",titleI18n:"app.lock"}}]},{path:"/detail/:detailId",component:n}];let gt=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[r.Bz.forChild(ct)],r.Bz]}),a})(),ht=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[Z.m8,gt]]}),a})()}}]);